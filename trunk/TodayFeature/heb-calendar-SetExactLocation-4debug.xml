<?xml version="1.0"encoding="UTF-8"?>
<Module><ModulePrefs
title="Hebrew Gregorian Calendar"
title_url="http://hebcalendar.blogspot.com/"
directory_title="Calendar"
description="Jewish-Gregorian Calendar"
author="Idan Porat, Niv Goldman"
author_email="hebCalendar@gmail.com"
author_affiliation="Tel Aviv University"
author_location="Tel Aviv, Israel"
screenshot="http://heb-calendar.googlecode.com/svn/trunk/images/design/newthumb.jpg"
thumbnail="http://heb-calendar.googlecode.com/svn/trunk/images/design/newthumb.jpg"
category="communication"
category2="tools"><Require feature="tabs"/><Require feature="dynamic-height"/><Require feature="setprefs"/><Require feature="minimessage"/><Locale lang="en"country="us"/></ModulePrefs><UserPref name="Language"display_name="Interface Language"default_value="english"datatype="enum"><EnumValue value="english"/><EnumValue value="hebrew"/></UserPref><UserPref name="currentLocation"display_name="Choose City:"default_value="31,46,N,35,14,E,2"datatype="enum"><EnumValue value="41,20,N,19,49,E,1"display_value="Tirana, Albania"/><EnumValue value="8,50,S,13,14,E,1"display_value="Luanda, Angola"/><EnumValue value="34,40,S,58,24,W,-3"display_value=" Buenos Aires, Argentina"/><EnumValue value="32,57,S,60,40,W,-3"display_value="Rosario, Argentina"/><EnumValue value="41,09,S,71,18,W,-3"display_value="San Carlos de Bariloche, Argentina"/><EnumValue value="27,28,S,153,02,E,10"display_value="Brisbane, Australia"/><EnumValue value="37,49,S,144,58,E,10"display_value="Melbourne, Victoria, Australia"/><EnumValue value="33,52,S,151,13,E,10"display_value="Sydney, Australia"/><EnumValue value="48,13,N,16,22,E,1"display_value="Vienna, Austria"/><EnumValue value="41,02,N,49,53,E,4"display_value="Baku, Azerbaijan"/><EnumValue value="53,55,N,27,33,E,2"display_value="Minsk, Belarus"/><EnumValue value="51,13,N,04,24,E,1"display_value="Antwerp, Belgium"/><EnumValue value="50,51,N,4,21,E,1"display_value="Brussels, Belgium"/><EnumValue value="32,18,N,64,47,W,-4"display_value="Hamilton, Bermuda"/><EnumValue value="16,30,S,68,08,W,-4"display_value="La Paz, Bolivia"/><EnumValue value="31,46,S,52,21,W,-3"display_value="Pelotas, Brazil"/><EnumValue value="22,54,S,43,14,W,-3"display_value="Rio de Janeiro, Brazil"/><EnumValue value="12,58,S,38,30,W,-3"display_value="Salvador, Brazil"/><EnumValue value="42,42,N,23,20,E,2"display_value="Sofia, Bulgaria"/><EnumValue value="51,03,N,114,03,W,-7"display_value="Calgary, Canada"/><EnumValue value="45,26,N,75,41,W,-5"display_value="Ottawa, Canada"/><EnumValue value="43,39,N,79,23,W,-5"display_value="Toronto, Canada"/><EnumValue value="49,16,N,123,07,W,-8"display_value="Vancouver, Canada"/><EnumValue value="49,54,N,97,08,W,-6"display_value="Winnipeg,  Manitoba, Canada"/><EnumValue value="33,27,S,70,39,W,-4"display_value="Santiago, Chile"/><EnumValue value="9,56,N,84,05,W,-6"display_value="San José, Costa Rica"/><EnumValue value="45,49,N,15,59,E,1"display_value="Zagreb, Croatia"/><EnumValue value="35,10,N,33,21,E,2"display_value="Nicosia, Cyprus"/><EnumValue value="50,05,N,14,26,E,1"display_value="Prague, Czech Republic"/><EnumValue value="55,43,N,12,34,E,1"display_value="Copenhagen, Denmark"/><EnumValue value="0,15,S,78,35,W,-5"display_value="Quito, Ecuador"/><EnumValue value="44,50,N,00,35,W,1"display_value="Bordeaux, France"/><EnumValue value="45,46,N,4,50,E,1"display_value="Lyon, France"/><EnumValue value="43,18,N,5,22,E,1"display_value="Marseille, France"/><EnumValue value="48,52,N,2,20,E,1"display_value="Paris, France"/><EnumValue value="52,31,N,13,25,E,1"display_value="Berlin, Germany"/><EnumValue value="53,04,N,8,49,E,1"display_value="Bremen, Germany"/><EnumValue value="50,07,N,8,41,E,1"display_value="Frankfurt am Main, Germany"/><EnumValue value="48,08,N,11,34,E,1"display_value="Munich,  Bavaria, Germany"/><EnumValue value="5,30,N,0,10,W,0"display_value="Accra, Ghana"/><EnumValue value="38,00,N,23,43,E,1"display_value="Athens, Greece"/><EnumValue value="40,38,N,22,57,E,1"display_value="Thessaloniki, Greece"/><EnumValue value="22,17,N,114,08,E,8"display_value="Hong Kong, Hong Kong, China"/><EnumValue value="47,28,N,19,03,E,1"display_value="Budapest, Hungary"/><EnumValue value="12,58,N,77,35,E,5.5"display_value="Bangalore, India"/><EnumValue value="17,22,N,78,29,E,5.5"display_value="Hyderabad, India"/><EnumValue value="18,58,N,72,49,E,5.5"display_value="Mumbai (Bombay), Maharashtra, India"/><EnumValue value="28,38,N,77,13,E,5.5"display_value="New Delhi, India"/><EnumValue value="6,11,S,106,50,E,7"display_value="Jakarta, Indonesia"/><EnumValue value="53,21,N,6,16,W,0"display_value="Dublin, Ireland"/><EnumValue value="32,37,N,35,17,E,2"display_value="Afula, Israel"/><EnumValue value="32,55,N,35,04,E,2"display_value="Akko, Israel"/><EnumValue value="31,49,N,34,35,E,2"display_value="Ashdod, Israel"/><EnumValue value="31,42,N,34,35,E,2"display_value="Asheqelon, Israel"/><EnumValue value="31,15,N,34,48,E,2"display_value="Beersheba, Israel"/><EnumValue value="32,06,N,34,51,E,2"display_value="Bene Beraq, Israel"/><EnumValue value="31,44,N,35,00,E,2"display_value="Bet Shemesh, Israel"/><EnumValue value="29,33,N,34,57,E,2"display_value="Eilat, Israel"/><EnumValue value="32,04,N,34,48,E,2"display_value="Givatayim, Israel"/><EnumValue value="32,27,N,34,55,E,2"display_value="Hadera, Israel"/><EnumValue value="32,46,N,35,00,E,2"display_value="Haifa, Israel"/><EnumValue value="32,10,N,34,50,E,2"display_value="Herzliyya, Israel"/><EnumValue value="32,09,N,34,53,E,2"display_value="Hod Hasharon, Israel"/><EnumValue value="32,01,N,34,46,E,2"display_value="Holon, Israel"/><EnumValue value="31,46,N,35,14,E,2"display_value="Jerusalem, Israel"/><EnumValue value="32,55,N,35,18,E,2"display_value="Karmi,El, Israel"/><EnumValue value="31,57,N,34,54,E,2"display_value="Lod, Israel"/><EnumValue value="33,01,N,35,05,E,2"display_value="Nahariyya, Israel"/><EnumValue value="32,42,N,35,17,E,2"display_value="Nazareth, Israel"/><EnumValue value="32,20,N,34,51,E,2"display_value="Netanya, Israel"/><EnumValue value="32,02,N,34,51,E,2"display_value="Or Yehuda, Israel"/><EnumValue value="32,06,N,34,53,E,2"display_value="Petah Tiqwa, Israel"/><EnumValue value="32,03,N,34,51,E,2"display_value="Qiryat Ono, Israel"/><EnumValue value="33,13,N,35,35,E,2"display_value="Qiryat Shemona, Israel"/><EnumValue value="32,11,N,34,52,E,2"display_value="Raananna, Israel"/><EnumValue value="32,04,N,34,48,E,2"display_value="Ramat Gan, Israel"/><EnumValue value="32,09,N,34,50,E,2"display_value="Ramat Hasharon, Israel"/><EnumValue value="31,55,N,34,52,E,2"display_value="Ramla, Israel"/><EnumValue value="31,54,N,34,48,E,2"display_value="Rehovot, Israel"/><EnumValue value="31,58,N,34,48,E,2"display_value="Rishon le Ziyyon, Israel"/><EnumValue value="32,05,N,34,48,E,2"display_value="Tel Aviv, Israel"/><EnumValue value="32,47,N,35,31,E,2"display_value="Tiberias, Israel"/><EnumValue value="32,46,N,34,58,E,2"display_value="Tirat Karmel, Israel"/><EnumValue value="32,31,N,35,09,E,2"display_value="Umm El Fahm, Israel"/><EnumValue value="43,46,N,11,15,E,1"display_value="Florence, Italy"/><EnumValue value="45,28,N,9,10,E,1"display_value="Milan, Italy"/><EnumValue value="40,50,N,14,15,E,1"display_value="Naples, Italy"/><EnumValue value="41,54,N,12,29,E,1"display_value="Rome, Italy"/><EnumValue value="45,26,N,12,19,E,1"display_value="Venice, Italy"/><EnumValue value="43,04,N,141,21,E,9"display_value="Sapporo, Japan"/><EnumValue value="35,41,N,139,46,E,9"display_value="Tokyo, Japan"/><EnumValue value="31,57,N,35,56,E,2"display_value="Amman, Jordan"/><EnumValue value="43,17,N,76,54,E,6"display_value="Almaty, Kazakhstan"/><EnumValue value="51,10,N,71,26,E,6"display_value="Astana, Kazakhstan"/><EnumValue value="56,58,N,24,8,E,2"display_value="Riga, Latvia"/><EnumValue value="42,0,N,21,26,E,1"display_value="Skopje, Macedonia"/><EnumValue value="3,08,N,101,42,E,8"display_value="Kuala Lumpur, Malaysia"/><EnumValue value="20,40,N,103,21,W,-6"display_value="Guadalajara, Mexico"/><EnumValue value="19,41,N,99,13,W,-6"display_value="Mexico City, Mexico"/><EnumValue value="33,32,N,7,35,W,0"display_value="Casablanca, Morocco"/><EnumValue value="31,08,N,8,0,W,0"display_value="Marrakech, Morocco"/><EnumValue value="27,43,N,85,22,E,5.75"display_value="Kathmandu, Nepal"/><EnumValue value="52,22,N,4,54,E,1"display_value="Amsterdam, Netherlands"/><EnumValue value="53,13,N,6,34,E,1"display_value="Groningen, Netherlands"/><EnumValue value="51,56,N,4,28,E,1"display_value="Rotterdam, Netherlands"/><EnumValue value="36,51,S,174,47,E,12"display_value="Auckland, New Zealand"/><EnumValue value="43,32,S,172,37,E,12"display_value="Christchurch, New Zealand"/><EnumValue value="41,17,S,174,47,E,12"display_value="Wellington, New Zealand"/><EnumValue value="12,08,N,86,16,W,-6"display_value="Managua, Nicaragua"/><EnumValue value="9,04,N,7,29,E,1"display_value="Abuja, Nigeria"/><EnumValue value="6,35,N,3,20,E,1"display_value="Lagos, Nigeria"/><EnumValue value="59,56,N,10,45,E,1"display_value="Oslo, Norway"/><EnumValue value="8,58,N,79,32,W,-5"display_value="Panama City, Panama"/><EnumValue value="39,54,N,116,23,E,8"display_value="Beijing, People,s Republic of China"/><EnumValue value="30,39,N,104,04,E,8"display_value="Chengdu, People,s Republic of China"/><EnumValue value="23,20,N,113,30,E,8"display_value="Guangzhou, People,s Republic of China"/><EnumValue value="45,45,N,126,41,E,8"display_value="Harbin, People,s Republic of China"/><EnumValue value="31,10,N,121,28,E,8"display_value="Shanghai, People,s Republic of China"/><EnumValue value="22,33,N,114,06,E,8"display_value="Shenzhen, People,s Republic of China"/><EnumValue value="39,08,N,117,11,E,8"display_value="Tianjin, People,s Republic of China"/><EnumValue value="14,36,N,120,59,E,8"display_value="Manila, Philippines"/><EnumValue value="52,14,N,21,01,E,1"display_value="Warsaw, Poland"/><EnumValue value="38º42,N,9º11,W,1"display_value="Lisbon, Portugal"/><EnumValue value="41,09,N,8,38,W,1"display_value="Porto, Portugal"/><EnumValue value="44,25,N,26,06,E,1"display_value="Bucharest, Romania"/><EnumValue value="52,17,N,104,16,E,8"display_value="Irkutsk, Russia"/><EnumValue value="55,45,N,37,37,E,3"display_value="Moscow, Russia"/><EnumValue value="14,01,N,60,59,W,-4"display_value="Castries, Saint Lucia"/><EnumValue value="24,43,N,46,43,E,3"display_value="Riyadh, Saudi Arabia"/><EnumValue value="4,37,S,55,27,E,4"display_value="Victoria, Seychelles"/><EnumValue value="1,17,N,103,51,E,8"display_value="Singapore, Singapore"/><EnumValue value="48,09,N,17,07,E,1"display_value="Bratislava, Slovakia"/><EnumValue value="46,03,N,14,30,E,1"display_value="Ljubljana, Slovenia"/><EnumValue value="33,55,S,18,25,E,2"display_value="Cape Town, South Africa"/><EnumValue value="26,08,S,27,54,E,2"display_value="Johannesburg, South Africa"/><EnumValue value="37,33,N,126,59,E,9"display_value="Seoul, South Korea"/><EnumValue value="41,23,N,2º11,E,1"display_value="Barcelona, Spain"/><EnumValue value="40,23’N,3,43,W,1"display_value="Madrid, Spain"/><EnumValue value="39,29,N,0,22,W,1"display_value="Valencia, Spain"/><EnumValue value="6,54,N,79,50,E,5.5"display_value="Colombo, Sri Lanka"/><EnumValue value="5,52,N,55,10,W,-3"display_value="Paramaribo, Suriname"/><EnumValue value="59,21,N,18,04,E,1"display_value="Stockholm, Sweden"/><EnumValue value="47,34,N,7,36,E,1"display_value="Basel, Switzerland"/><EnumValue value="46,57,N,7,27,E,1"display_value="Bern, Switzerland"/><EnumValue value="46,12,N,6,09,E,1"display_value="Geneva, Switzerland"/><EnumValue value="46,31,N,6,38,E,1"display_value="Lausanne, Switzerland"/><EnumValue value="25,02,N,121,38,E,8"display_value="Taipei, Taiwan"/><EnumValue value="13,45,N,100,31,E,7"display_value="Bangkok, Thailand"/><EnumValue value="18,47,N,98,59,E,7"display_value="Chiang Mai, Thailand"/><EnumValue value="41,00,N,29,00,E,2"display_value="Istanbul, Turkey"/><EnumValue value="0,19,N,32,35,E,3"display_value="Kampala, Uganda"/><EnumValue value="50,27,N,30,30,E,2"display_value="Kiev, Ukraine"/><EnumValue value="46,28,N,30,44,E,2"display_value="Odessa, Ukraine"/><EnumValue value="51,27,N,2,36,W,0"display_value="Bristol,  England, United Kingdom"/><EnumValue value="52,12,N,0,07,E,0"display_value="Cambridge, United Kingdom"/><EnumValue value="55,57,N,03,12,W,0"display_value="Edinburgh, United Kingdom"/><EnumValue value="55,52,N,04,15,W,0"display_value="Glasgow, United Kingdom"/><EnumValue value="53,25,N,2,59,W,0"display_value="Liverpool, United Kingdom"/><EnumValue value="51,30,N,0,08,W,0"display_value="London, United Kingdom"/><EnumValue value="53,29,N,2,15,W,0"display_value="Manchester, United Kingdom"/><EnumValue value="53,29,N,2,15,W,0"display_value="Manchester, United Kingdom"/><EnumValue value="51,45,N,1,15,W,0"display_value="Oxford, United Kingdom"/><EnumValue value="50,22,N,4,08,W,0"display_value="Plymouth, United Kingdom"/><EnumValue value="53,23,N,1,28,W,0"display_value="Sheffield, United Kingdom"/><EnumValue value="51,00,N,1,04,W,0"display_value="Southampton, United Kingdom"/><EnumValue value="33,45,N,84,23,W,-5"display_value="Atlanta, Georgia, United States"/><EnumValue value="30,18,N,97,45,W,-6"display_value="Austin, Texas, United States"/><EnumValue value="42,21,N,71,04,W,-5"display_value="Boston, Massachusetts, United States"/><EnumValue value="42,54,N,78,51,W,-5"display_value="Buffalo, New York, United States"/><EnumValue value="35,14,N,80,50,W,-5"display_value="Charlotte, North Carolina, United States"/><EnumValue value="41,50,N,87,39,W,-6"display_value="Chicago,  Illinois, United States"/><EnumValue value="39,08,N,84,30,W,-5"display_value="Cincinnati, Ohio, United States"/><EnumValue value="41,29,N,81,40,W,-5"display_value="Cleveland, Ohio, United States"/><EnumValue value="39,59,N,82,59,W,-5"display_value="Columbus, Ohio, United States"/><EnumValue value="32,46,N,96,48,W,-6"display_value="Dallas, Texas, United States"/><EnumValue value="39,45,N,104,59,W,-7"display_value="Denver, Colorado, United States"/><EnumValue value="21,18,N,157,50,W,-10"display_value="Honolulu, Hawaii, United States"/><EnumValue value="29,45,N,95,22,W,-6"display_value="Houston,  Texas, United States"/><EnumValue value="39,06,N,94,35,W,-6"display_value="Kansas City, Missouri, United States"/><EnumValue value="36,11,N,115,13,W,-8"display_value="Las Vegas,  Nevada, United States"/><EnumValue value="34,03,N,118,15,W,-8"display_value="Los Angeles,  California, United States"/><EnumValue value="25,47,N,80,13,W,-5"display_value="Miami, United States"/><EnumValue value="40,43,N,74,00,W,-5"display_value="New York,  New York, United States"/><EnumValue value="28,25,N,81,19,W,-5"display_value="Orlando, Florida, United States"/><EnumValue value="39,57,N,75,10,W,-5"display_value="Philadelphia, United States"/><EnumValue value="33,32,N,112,05,W,-7"display_value="Phoenix, Arizona, United States"/><EnumValue value="40,27,N,80,00,W,-5"display_value="Pittsburgh,  Pennsylvania, United States"/><EnumValue value="45,31,N,122,41,W,-8"display_value="Portland, Oregon, United States"/><EnumValue value="41,49,N,71,25,W,-5"display_value="Providence,  Rhode Island, United States"/><EnumValue value="39,31,N,119,49,W,-8"display_value="Reno, Nevada, United States"/><EnumValue value="33,56,N,117,23,W,-8"display_value="Riverside, California, United States"/><EnumValue value="32,43,N,117,10,W,-8"display_value="San Diego,  California, United States"/><EnumValue value="37,46,N,122,26,W,-8"display_value="San Francisco, United States"/><EnumValue value="47,36,N,122,19,W,-8"display_value="Seattle,  Washington, United States"/><EnumValue value="27,58,N,82,27,W,-5"display_value="Tampa, Florida, United States"/><EnumValue value="38,54,N,77,02,W,-5"display_value="Washington, D.C., United States"/><EnumValue value="34,53,S,56,10,W,-3"display_value="Montevideo, Uruguay"/><EnumValue value="10º30’N,66º56’W,-4.5"display_value="Caracas, Venezuela"/></UserPref><UserPref name="DocDirection"display_name="Text Direction"default_value="Left to Right"datatype="enum"><EnumValue value="Right to Left"/><EnumValue value="Left to Right"/></UserPref><UserPref name="minimessages"display_name="Silent Alerts"default_value="Show"datatype="enum"><EnumValue value="Show"/><EnumValue value="Don't Show"/></UserPref><UserPref name="shabbathTimes"display_name="Display Shabbath Times"default_value="Show"datatype="enum"><EnumValue value="Show"/><EnumValue value="Don't Show"/></UserPref><UserPref name="clock"display_name="Display Clock"default_value="Don't Show"datatype="enum"><EnumValue value="Show"/><EnumValue value="Don't Show"/></UserPref><UserPref name="mylist"display_name="Add Events"datatype="hidden"/><Content type="html"><![CDATA[<HTML><HEAD><META http-equiv=Content-Type content="text/html; charset=utf-8"><SCRIPT type=text/javascript>var tabs;gadgets.util.registerOnLoadHandler(init);var loaded=false;var BORDER_COLOR='#000000'
var LIGHTBLUE_COLOR_CELLBACKGROUND='#c3d9ff'
var HEADLINEFONT_COLOR='#ffffff'
var SHABBATHCELLBACKGROUND_COLOR='#80afff'
var HINTCOLORBACKGROUND='#c8d4fa'
var CURRENTDAYCOLOR='#cc0000'
var HEADLINEBACKCOLOR='#2d7bff'
var OTHERMONTH_FORECOLOR='#858585'
var OTHERMONTH_FORECOLOR_WITHEVENT='#acacac'
var SHABBATHCELLBACKGROUND_COLOR_FIREFOX='rgb(128, 175, 255)'
var OTHERMONTH_FORECOLOR_WITHEVENT_FIREFOX='rgb(172, 172, 172)'
var ENUM_XML_Nodes={HebrewMonths:0,HebrewDates:1,GregorianMonths:2,Holidays:3,TabsName:4,DaysOfWeek:5,ShabbathText:6,EventTextAnnually:7,GeneralText:8,EventTabText:9,MessagesToUserInEventTab:10,ListEventsTabText:11,AdarBetCases:12,FeatureBox:13};var MAX_HOLIDAYS_COUNT=100;var ENUM_Holidays=new Array(MAX_HOLIDAYS_COUNT);var ENUM_TabsNames=new Array(5);var arrDaysOfTheWeek=new Array("א","ב","ג","ד","ה","ו","ש");var ENUM_ShabbathText=new Array(3);var eventTextYearly="Annually";var ENUM_GeneralText_EarliedOrPostponed=new Array(2);var ENUM_EventTabText=new Array(20);var ENUM_EventTabMessagesToUser=new Array(7);var ENUM_ListEventsTabText=new Array(5);var ENUM_AdarBetCases=new Array(3);var ENUM_FeatureBox=new Array(3);var editingIndex=0;var arrComulativeDays=new Array(1,32,60,91,121,152,182,213,244,274,305,335,366);var currentGregOrHeb;var prefs=new gadgets.Prefs();var chosenLanguage=prefs.getString("Language");var chosenLocation=prefs.getString("currentLocation");var msg;var just="ltr";var alPrev="right";var alNext="left";var messages=new Array();var events=(prefs.getString("mylist")).split("|");var eventCount;var LeftToRight=true;var DESIGN_LOCATION="http://heb-calendar.googlecode.com/svn/trunk/images/design/"
var loadingImageUrl="http://heb-calendar.googlecode.com/svn/trunk/TodayFeature/loading.gif";var TD_W5H9="width='5' align='center' height='9' style='font-size:1px;' "
var TD_W40H9="width='40' align='center' height='9' style='font-size:1px;' "
var FULL_DAY=5;var HALF_DAY=4;var OTHER_WEEKDAY=3;var CURRENT_WEEKDAY=2;var OTHER_SATURDAY=1;var CURRENT_SATURDAY=0;var NONE=0;var toolTipCellText=Array(42);var currMonth=0;var currYear=0;var currDay=0;var currHebYear=0;var HEB_DATE=0;var GREG_DATE=1;var doubleClickFlag=0;var editMode=false;var RunningForTheFirstTime=true;var FirstRunReadFromXML=true;if(prefs.getString("DocDirection")=="Right to Left")
{just="rtl";alPrev="left";alNext="right";}
var but02=new Image(26,38);but02.src=DESIGN_LOCATION+"but_02"+just+".jpg";var butB02=new Image(26,38);butB02.src=DESIGN_LOCATION+"butB_02"+just+".jpg";var but04=new Image(18,38);but04.src=DESIGN_LOCATION+"but_04"+just+".jpg";var butB04=new Image(18,38);butB04.src=DESIGN_LOCATION+"butB_04"+just+".jpg";var but06=new Image(18,38);but06.src=DESIGN_LOCATION+"but_06"+just+".jpg";var butB06=new Image(18,38);butB06.src=DESIGN_LOCATION+"butB_06"+just+".jpg";var but08=new Image(26,38);but08.src=DESIGN_LOCATION+"but_08"+just+".jpg";var butB08=new Image(26,38);butB08.src=DESIGN_LOCATION+"butB_08"+just+".jpg";var holidays=null;function firstRun()
{var now=new Date();currMonth=now.getMonth()
currYear=now.getUTCFullYear()
currDay=now.getDate()}
function ReadXMLAndSetData()
{var url="http://heb-calendar.googlecode.com/svn/trunk/TodayFeature/NamesXML.xml";var params={};params[gadgets.io.RequestParameters.CONTENT_TYPE]=gadgets.io.ContentType.DOM;gadgets.io.makeRequest(url,response,params)}
function response(obj)
{var objectData=obj.data;if(obj==null||typeof(obj)!="object"||objectData==null){document.getElementById("content_div").innerHTML="<i>Invalid data.</i>";return;}
var languagesAvailableList=objectData.getElementsByTagName("Language");var chosenLanguageXMLList;var nodeList=languagesAvailableList.item(0).childNodes;for(var j=0;j<nodeList.length;j++)
{var node=nodeList.item(j);if(chosenLanguage==node.nodeName)
{break;}}
var IE=document.all?true:false;if(!IE)
{j=(j-1)/2;}
var tmp=objectData.getElementsByTagName("HebrewMonths");tmp=tmp.item(j).firstChild.nodeValue;arrHebMonths=tmp.split(",");var tmp=objectData.getElementsByTagName("HebrewDates");tmp=tmp.item(j).firstChild.nodeValue;arrHebDate=tmp.split(",");var tmp=objectData.getElementsByTagName("GregorianMonths");tmp=tmp.item(j).firstChild.nodeValue;arrGregMonths=tmp.split(",");var tmp=objectData.getElementsByTagName("Holidays");var holidayList=tmp.item(j).childNodes;FromListToEnum(holidayList,ENUM_Holidays);var tmp=objectData.getElementsByTagName("TabsName");var tabsList=tmp.item(j).childNodes;FromListToEnum(tabsList,ENUM_TabsNames);var tmp=objectData.getElementsByTagName("DaysOfTheWeek");tmp=tmp.item(j).firstChild.nodeValue;arrDaysOfTheWeek=tmp.split(",");var tmp=objectData.getElementsByTagName("ShabbathText");var shabbathList=tmp.item(j).childNodes;FromListToEnum(shabbathList,ENUM_ShabbathText);var tmp=objectData.getElementsByTagName("EventTextAnnually");eventTextYearly=tmp.item(j).firstChild.nodeValue;var tmp=objectData.getElementsByTagName("GeneralText");var generalTextList=tmp.item(j).childNodes;FromListToEnum(generalTextList,ENUM_GeneralText_EarliedOrPostponed);var tmp=objectData.getElementsByTagName("EventTabText");var eventTabText=tmp.item(j).childNodes;FromListToEnum(eventTabText,ENUM_EventTabText);var tmp=objectData.getElementsByTagName("MessagesToUserInEventTab");var messagesToUserInEventTabText=tmp.item(j).childNodes;FromListToEnum(messagesToUserInEventTabText,ENUM_EventTabMessagesToUser);var tmp=objectData.getElementsByTagName("ListEventsText");var listEventsTabTexts=tmp.item(j).childNodes;FromListToEnum(listEventsTabTexts,ENUM_ListEventsTabText);var tmp=objectData.getElementsByTagName("AdarBetCases");var messagesAdarBetCasesText=tmp.item(j).childNodes;FromListToEnum(messagesAdarBetCasesText,ENUM_AdarBetCases);var tmp=objectData.getElementsByTagName("FeatureBox");var messagesFeatureBoxText=tmp.item(j).childNodes;FromListToEnum(messagesFeatureBoxText,ENUM_FeatureBox);SetAllHolidays();loaded=true;tabs.getTabs()[0].getNameContainer().innerHTML=ENUM_TabsNames[0];tabs.getTabs()[1].getNameContainer().innerHTML=ENUM_TabsNames[2];tabs.getTabs()[2].getNameContainer().innerHTML=ENUM_TabsNames[3];}
function FromListToEnum(list,arrEnum)
{var count=0;for(var l=0;l<list.length;l++)
{if(list.item(l).firstChild!=null)
{var tmp=list.item(l).firstChild.nodeValue;arrEnum[count]=tmp;count++;}}}
function SetAllHolidays()
{var roshHashana1=new holiday(ENUM_Holidays[0],1,1,FULL_DAY);var roshHashana2=new holiday(ENUM_Holidays[1],1,2,FULL_DAY);var tzomGdalia=new holiday(ENUM_Holidays[2],1,3,NONE);tzomGdalia.isTzom=1;tzomGdalia.isMovable=1;var erevYomKipur=new holiday(ENUM_Holidays[3],1,9,HALF_DAY);var YomKipur=new holiday(ENUM_Holidays[4],1,10,FULL_DAY);var erevSukot=new holiday(ENUM_Holidays[5],1,14,HALF_DAY);var sukot=new holiday(ENUM_Holidays[6],1,15,FULL_DAY);var sukot_holHamoed1=new holiday(ENUM_Holidays[7],1,16,HALF_DAY);var sukot_holHamoed2=new holiday(ENUM_Holidays[8],1,17,HALF_DAY);var sukot_holHamoed3=new holiday(ENUM_Holidays[9],1,18,HALF_DAY);var sukot_holHamoed4=new holiday(ENUM_Holidays[10],1,19,HALF_DAY);var sukot_holHamoed5=new holiday(ENUM_Holidays[11],1,20,HALF_DAY);var sukot_hoshaanaRaba=new holiday(ENUM_Holidays[12],1,21,HALF_DAY);var sukot_shminiAtzeret=new holiday(ENUM_Holidays[13],1,22,FULL_DAY);var rabin=new holiday(ENUM_Holidays[14],2,12,NONE);rabin.isMovable=1;rabin.isHistoricalEvent=1;var erevHanuka=new holiday(ENUM_Holidays[15],3,24,NONE);var hanuka1=new holiday(ENUM_Holidays[16],3,25,NONE);var hanuka2=new holiday(ENUM_Holidays[17],3,26,NONE);var hanuka3=new holiday(ENUM_Holidays[18],3,27,NONE);var hanuka4=new holiday(ENUM_Holidays[19],3,28,NONE);var hanuka5=new holiday(ENUM_Holidays[20],3,29,NONE);var hanuka6=new holiday(ENUM_Holidays[21],4,1,NONE);hanuka6.isMovable=1;var hanuka7=new holiday(ENUM_Holidays[22],4,2,NONE);hanuka7.isMovable=1;var hanuka8=new holiday(ENUM_Holidays[23],4,3,NONE);hanuka8.isMovable=1;var tzomYudBetevet=new holiday(ENUM_Holidays[24],4,10,NONE);tzomYudBetevet.isTzom=1;tzomYudBetevet.isMovable=1;var tuBeshvat=new holiday(ENUM_Holidays[25],5,15,NONE);var tzomTaanitEster=new holiday(ENUM_Holidays[26],7,13,NONE);tzomTaanitEster.isMovable=1;var purim=new holiday(ENUM_Holidays[27],7,14,HALF_DAY);var shushanPurim=new holiday(ENUM_Holidays[28],7,15,NONE);var erevPesah=new holiday(ENUM_Holidays[29],8,14,HALF_DAY);var Pesah=new holiday(ENUM_Holidays[30],8,15,FULL_DAY);var pesah_holHamoed1=new holiday(ENUM_Holidays[31],8,16,HALF_DAY);var pesah_holHamoed2=new holiday(ENUM_Holidays[32],8,17,HALF_DAY);var pesah_holHamoed3=new holiday(ENUM_Holidays[33],8,18,HALF_DAY);var pesah_holHamoed4=new holiday(ENUM_Holidays[34],8,19,HALF_DAY);var pesah_holHamoed5=new holiday(ENUM_Holidays[35],8,20,HALF_DAY);var pesah_hagSheni=new holiday(ENUM_Holidays[36],8,21,FULL_DAY);var yomHashoa=new holiday(ENUM_Holidays[37],8,27,NONE);yomHashoa.isMovable=1;yomHashoa.isHistoricalEvent=1;var yomHazikaron=new holiday(ENUM_Holidays[38],9,4,HALF_DAY);yomHazikaron.isMovable=1;yomHazikaron.isHistoricalEvent=1;var yomHaatzmaut=new holiday(ENUM_Holidays[39],9,5,FULL_DAY);yomHaatzmaut.isHistoricalEvent=1;yomHaatzmaut.isMovable=1;var lagBaomer=new holiday(ENUM_Holidays[40],9,18,NONE);var yomYerushalaim=new holiday(ENUM_Holidays[41],9,28,NONE);yomYerushalaim.isHistoricalEvent=1;var erevShavuot=new holiday(ENUM_Holidays[42],10,5,HALF_DAY);var Shavuot=new holiday(ENUM_Holidays[43],10,6,FULL_DAY);var tzomYudZain=new holiday(ENUM_Holidays[44],11,17,NONE);tzomYudZain.isTzom=1;tzomYudZain.isMovable=1;var tzomTetBeAv=new holiday(ENUM_Holidays[45],12,9,NONE);tzomTetBeAv.isTzom=1;tzomTetBeAv.isMovable=1;var erevRoshHashana=new holiday(ENUM_Holidays[46],13,29,HALF_DAY);var holidays_01=new Array(roshHashana1,roshHashana2,tzomGdalia,erevYomKipur,YomKipur,erevSukot,sukot,sukot_holHamoed1,sukot_holHamoed2,sukot_holHamoed3,sukot_holHamoed4,sukot_holHamoed5,sukot_hoshaanaRaba,sukot_shminiAtzeret);var holidays_02=new Array(rabin);var holidays_03=new Array(erevHanuka,hanuka1,hanuka2,hanuka3,hanuka4,hanuka5);var holidays_04=new Array(hanuka6,hanuka7,hanuka8,tzomYudBetevet);var holidays_05=new Array(tuBeshvat);var holidays_06=new Array();var holidays_07=new Array(tzomTaanitEster,purim,shushanPurim);var holidays_08=new Array(erevPesah,Pesah,pesah_holHamoed1,pesah_holHamoed2,pesah_holHamoed3,pesah_holHamoed4,pesah_holHamoed5,pesah_hagSheni,yomHashoa);var holidays_09=new Array(yomHazikaron,yomHaatzmaut,lagBaomer,yomYerushalaim);var holidays_10=new Array(erevShavuot,Shavuot);var holidays_11=new Array(tzomYudZain);var holidays_12=new Array(tzomTetBeAv);var holidays_13=new Array(erevRoshHashana);holidays=new Array(holidays_01,holidays_02,holidays_03,holidays_04,holidays_05,holidays_06,holidays_07,holidays_08,holidays_09,holidays_10,holidays_11,holidays_12,holidays_13);}
function init(){tabs=new gadgets.TabSet(__MODULE_ID__);tabs.addDynamicTab("לוח שנה",writeCalendar);tabs.addDynamicTab("הוספת אירוע",addEventForm);tabs.addDynamicTab("רשימת אירועים",listEvents);}
function ExecuteFunctionAfterReadingXML(functionToRun,tabId)
{if(FirstRunReadFromXML==true)
{var loadingImageHTML="<br><center><img src='"+loadingImageUrl+"' border='0' /></center>";document.getElementById(tabId).innerHTML=loadingImageHTML;ReadXMLAndSetData();FirstRunReadFromXML=false;}
setTimeout(functionToRun+"('"+tabId+"')",500);}
function writeCalendar(tabId){if(loaded==false)
{ExecuteFunctionAfterReadingXML("writeCalendar",tabId);return;}
editMode=false;currentGregOrHeb="";var text=""
text="<br><center>"
text+="<table id='headl' borderColor="+BORDER_COLOR+" cellSpacing='0' cellPadding='0' style='border-collapse: collapse' border='0'>"
text+="<tbody><tr><td><table cellSpacing='0' cellPadding='0' border='0' bgcolor="+LIGHTBLUE_COLOR_CELLBACKGROUND+" width='290'><tbody><tr>"
text+="<td id=prevyear background='"+DESIGN_LOCATION+"cal_03"+just+".jpg' rowspan='2' colSpan='1' width='45' height='38' align='"+alPrev+"'>"
text+="<a href='javascript:changedate(0,-1)'><img src='"+DESIGN_LOCATION+"but_02"+just+".jpg' onmousedown='this.src=butB02.src' onmouseup='this.src=but02.src' border='0' /></a></td>"
text+="<td id=prevmonth background='"+DESIGN_LOCATION+"cal_04"+just+".jpg' rowspan='2' colSpan='1' width='33' height='38' align='right'>"
text+="<a href='javascript:changedate(-1,0)'><img src='"+DESIGN_LOCATION+"but_04"+just+".jpg' onmousedown='this.src=butB04.src' onmouseup='this.src=but04.src' border='0' /></a></td>"
text+="<td id=picture background='"+DESIGN_LOCATION+"cal_04"+just+".jpg' rowspan='2' colSpan='1' width='15' height='38' align='"+alPrev+"'>"
text+="<a href='javascript:firstRun();changedate(0,0)'><img src='http://heb-calendar.googlecode.com/svn/trunk/TodayFeature/img1fin.gif' width='15' border='0' /></a></td>"
text+="<td id=headline background='"+DESIGN_LOCATION+"cal_05"+just+".jpg' width='125' colSpan='3' height='21'><center><b><font size='3'>"
text+=arrGregMonths[currMonth]
text+="&nbsp;&nbsp;"+currYear
text+="<td id=nextmonth background='"+DESIGN_LOCATION+"cal_04"+just+".jpg' rowspan='2' colSpan='1' width='33' height='38' align='"+alNext+"'>"
text+="<a href='javascript:changedate(1,0)'><img src='"+DESIGN_LOCATION+"but_06"+just+".jpg' onmousedown='this.src=butB06.src' onmouseup='this.src=but06.src' border='0' /></a></td>"
text+="<td id=nextyear valign='Middle' background='"+DESIGN_LOCATION+"cal_07"+just+".jpg' rowspan='2' colSpan='1' width='45' height='38'  align='"+alNext+"'>"
text+="<a href='javascript:changedate(0,1)'><img src='"+DESIGN_LOCATION+"but_08"+just+".jpg' onmousedown='this.src=butB08.src' onmouseup='this.src=but08.src' border='0' /></a></td>"
text+="</tr><tr>"
text+="<td  background='"+DESIGN_LOCATION+"cal_09"+just+".jpg' width='141' colSpan='3' height='17'><center><b><font size='1pt' color="+HEADLINEFONT_COLOR+"><span id=headlineheb>"
text+="אלול תשסז - תשרי תשסח"
text+="</span></font></td></tr></tbody></table></table>"
text+="<table cellSpacing='0' cellPadding='0' style='border-collapse: collapse'>"
text+="<tbody><tr><td><table cellSpacing='0' cellPadding='0' bgcolor="+LIGHTBLUE_COLOR_CELLBACKGROUND+" border='0' width='290'><tbody><tr>"
text+="<td width='5' align='center' height='22' style='font-size:1px;'><img src='"+DESIGN_LOCATION+"cal_13"+just+".jpg' border=0/></td>"
for(ii=0;ii<=5;ii++){text+="<td width='40' background='"+DESIGN_LOCATION+"cal_14"+just+".jpg' id=day"+ii+" style='cursor: default;'  align='center' height='22'><b><font size='4'>"+arrDaysOfTheWeek[ii]+"</font></b></td>"}
text+="<td width='40' border='0' id=day6 style='cursor: default;' bgcolor="+SHABBATHCELLBACKGROUND_COLOR+" align='center' height='22'><b><font size='4'>"+arrDaysOfTheWeek[ii]+"</font></b></td>"
text+="<td width='5' align='center' height='22' style='font-size:1px;'><img src='"+DESIGN_LOCATION+"cal_20"+just+".jpg' border=0/></td>"
text+="</tr>"
aa=0
for(kk=0;kk<=5;kk++){text+="<tr>"
backimgurl="";backimgurl=((kk==5)?"cal_22"+just+".jpg":"cal_13"+just+".jpg");text+="<td width='5' height='22' style='font-size:10px;'><img src='"+DESIGN_LOCATION+""+backimgurl+"' border=0/></td>"
for(ii=0;ii<=6;ii++){backimgurl="";if((ii==0)&&(kk==5))backimgurl="background='"+DESIGN_LOCATION+"cal_23"+just+".gif'";if((ii==6)&&(kk==5))backimgurl="background='"+DESIGN_LOCATION+"cal_25"+just+".gif'";text+="<td align='center' border='0' id='cellsp"+aa+"'><table style='width:40px; height:22px;' cellSpacing='0' cellPadding='0'><tr><td align='center' "+backimgurl+" ondblclick='doubleClickedCell("+aa+");' onclick='clickedCell("+aa+");' onmousemove='hint(event,"+aa+");' onmouseout='hintout()' style='font:14px Verdana;cursor:pointer;'><span id=sp"+aa+" color='yellow'>0</span><span id=heb"+aa+" color='yellow'><font size='1.5'> יא</font></span></td></tr></table></td>"
aa+=1}
backimgurl=((kk==5)?"cal_26"+just+".jpg":"cal_20"+just+".jpg");text+="<td width='5' align='center' height='22' style='font-size:1px;'><img src='"+DESIGN_LOCATION+""+backimgurl+"' border=0/></td>"
text+="</tr>"}
text+="<tr>"
text+="<td "+TD_W5H9+" background='"+DESIGN_LOCATION+"cal_27"+just+".jpg'><img src='"+DESIGN_LOCATION+"cal_27"+just+".jpg' border=0/></td>"
text+="<td "+TD_W40H9+" background='"+DESIGN_LOCATION+"cal_28"+just+".jpg' >&nbsp;</td>"
var iii
for(iii=0;iii<5;iii++)
text+="<td "+TD_W40H9+" background='"+DESIGN_LOCATION+"cal_29"+just+".jpg' >&nbsp;</td>"
text+="<td "+TD_W40H9+" background='"+DESIGN_LOCATION+"cal_30"+just+".jpg' >&nbsp;</td>"
text+="<td "+TD_W5H9+" background='"+DESIGN_LOCATION+"cal_31"+just+".jpg' ><img src='"+DESIGN_LOCATION+"cal_31"+just+".jpg' border=0/></td>"
text+="</tr>"
text+="</table>"
text+="</td></tr>"
text+="</table>"
text+="<table id='emptyline' margin-left:'auto' margin-right:'auto'  bordercolor='white' cellspacing='0' cellpadding='2' style=' border-collapse: collapse; visibility:visible;'  border='1'>"
text+="<tr>"
text+="<td bgcolor='white'><font face='Arial' size='1' weight='bold'> <div id='emptylineinner'> "
text+="</div></font></td>"
text+="</tr>"
text+="</table>"
text+="<table id='featureBoxOuter' margin-left:'auto' margin-right:'auto'  bordercolor="+BORDER_COLOR+" cellspacing='0' cellpadding='2' style=' border-collapse: collapse; visibility:hidden;' border='1'>"
text+="<tr>"
text+="<td bgcolor="+HINTCOLORBACKGROUND+"><font face='Arial' size='2' weight='bold'> <div id='featureBox'>"
text+="</div></font></td>"
text+="</tr>"
text+="</table>"
text+="<table id='emptyline' margin-left:'auto' margin-right:'auto'  bordercolor='white' cellspacing='0' cellpadding='2' style=' border-collapse: collapse; visibility:visible;'  border='1'>"
text+="<tr>"
text+="<td bgcolor='white'><font face='Arial' size='1' weight='bold'> <div id='emptylineinner'> "
text+="</div></font></td>"
text+="</tr>"
text+="</table>"
text+="<table id='clockBoxOuter' margin-left:'auto' margin-right:'auto'  bordercolor="+BORDER_COLOR+" cellspacing='0' cellpadding='2' style=' border-collapse: collapse; visibility:hidden;'  border='1'>"
text+="<tr>"
text+="<td bgcolor="+HINTCOLORBACKGROUND+"><font face='Arial' size='2' weight='bold'> <div id='clockBox'>"
text+="</div></font></td>"
text+="</tr>"
text+="</table>"
text+="<div id='messageBox' dir='rtl'></div>"
text+="<div id='googleAdsense' dir='rtl' style='position: absolute; font-size:0.1em;visibility:hidden;'>סוכות, poker, calendar, holidays</div>"
text+="<table id='hint' bordercolor="+BORDER_COLOR+" cellspacing='0' cellpadding='2' style='position: absolute;visibility:hidden; border-collapse: collapse ' border='1'>"
text+="<tr>"
text+="<td bgcolor="+HINTCOLORBACKGROUND+"><font face='Arial' size='2'> <div id='hintdesc'>"
text+="</div></font></td>"
text+="</tr>"
text+="</table>"
document.getElementById(tabId).innerHTML=text;msg=new gadgets.MiniMessage(__MODULE_ID__,document.getElementById("messageBox"));changeCal();changeCalHebrew();if(!RunningForTheFirstTime){tabs.getTabs()[1].getNameContainer().innerHTML=ENUM_TabsNames[2];}
var dateFeatureAdded=new Date();var dateFromFeatureXML=ENUM_FeatureBox[0].split("/");dateFeatureAdded.setDate(dateFromFeatureXML[0]);dateFeatureAdded.setMonth(dateFromFeatureXML[1]-1);dateFeatureAdded.setUTCFullYear(dateFromFeatureXML[2]);var todaysDate=new Date()
var one_day=1000*60*60*24
if(Math.ceil((todaysDate.getTime()-dateFeatureAdded.getTime())/(one_day))<31)
{document.getElementById('featureBoxOuter').style.visibility="visible";document.getElementById('featureBox').innerHTML="<a href='http://hebcalendar.blogspot.com/'  target='_blank'>"+ENUM_FeatureBox[1]+"</a>";}
setTimeout("autoAdjustHeight()",500);RunningForTheFirstTime=false;if(prefs.getString("clock")=="Show")
{document.getElementById('clockBoxOuter').style.visibility="visible";updateClock()
setInterval('updateClock()',60000)}
var alltables=document.getElementsByTagName("table")
for(var i=0;i<alltables.length;i++)
disableSelection(alltables[i])
if(prefs.getString("DocDirection")=="Right to Left"){LeftToRight=false;document.dir="rtl"}
else{LeftToRight=true;document.dir="ltr"}}
function changeCal(){var now=new Date
var dd=now.getDate()
currDay=dd
var mm=now.getMonth()
var yyyy=now.getUTCFullYear()
var mmyyyy=new Date()
var day1=getFirstDayOfTheMonth();var prevM=getPreviousMonth();var arrN=new Array(42)
var aa
var maxDaysPreviousMonth=maxDays((prevM),currYear)
var maxDaysCurrMonth=maxDays(currMonth,currYear)
for(ii=0;ii<day1;ii++){arrN[ii]=maxDaysPreviousMonth-day1+ii+1}
aa=1
for(ii=day1;ii<=day1+maxDaysCurrMonth-1;ii++){arrN[ii]=aa
aa+=1}
aa=1
for(ii=day1+maxDaysCurrMonth;ii<=41;ii++){arrN[ii]=aa
aa+=1}
var dCount=0
for(ii=0;ii<=41;ii++){if(((ii<7)&&(arrN[ii]>20))||((ii>27)&&(arrN[ii]<20))){document.getElementById("sp"+ii).innerHTML=arrN[ii]+" "
if(dCount==6){changeStyleForCell(ii,OTHER_SATURDAY)}
else{changeStyleForCell(ii,OTHER_WEEKDAY)}}
else{document.getElementById("sp"+ii).innerHTML=arrN[ii]+" "
if((dCount==6)){changeStyleForCell(ii,CURRENT_SATURDAY)}
else{changeStyleForCell(ii,CURRENT_WEEKDAY)}
if((arrN[ii]==dd)&&(mm==currMonth)&&(yyyy==currYear)){document.getElementById("sp"+ii).style.color=CURRENTDAYCOLOR
document.getElementById("sp"+ii).style.fontWeight='bold'
document.getElementById("heb"+ii).style.color=CURRENTDAYCOLOR}}
dCount+=1
if(dCount>6){dCount=0}}
document.getElementById("headline").style.color='white'
document.getElementById("headline").style.fontWeight='bold'
document.getElementById("headline").align='center'
document.getElementById("headline").bgColor=HEADLINEBACKCOLOR
document.getElementById("headline").innerHTML=arrGregMonths[currMonth]+"&nbsp;&nbsp;"+currYear}
function changeCalHebrew(){dismissMiniMessages();autoAdjustHeight();var arrN=new Array(42)
var firstDateGregorian=parseInt(getFirstDayGregorian())
var prevM=getPreviousMonth()
var hebDaysTotal;var hebDate;var index1=getFirstDayOfTheMonth();var index2=index1+parseInt(maxDays(currMonth,currYear))-1;var ii=0
var mdyDate
var i=0
var indexFirsts=-1;var arrFirsts=new Array(3);var first=0
var last=0
while(ii<42)
{if(ii<index1)
{if(currMonth==0)
{hebDate=GregToHeb(new Date(currYear-1,prevM,firstDateGregorian+ii))
if(ii==0)
arrFirsts[++indexFirsts]=new firstDates(0,hebDate)}
else
{hebDate=GregToHeb(new Date(currYear,prevM,firstDateGregorian+ii))
if(ii==0)
arrFirsts[++indexFirsts]=new firstDates(0,hebDate)}}
else if((ii>=index1)&&(ii<=index2))
{hebDate=GregToHeb(new Date(currYear,currMonth,ii-index1+1))}
else
{if(currMonth==11)
{hebDate=GregToHeb(new Date(currYear+1,parseInt(getNextMonth()),ii-index2))}
else
{hebDate=GregToHeb(new Date(currYear,parseInt(getNextMonth()),ii-index2))}}
hebDaysTotal=daysInHebMonth(hebDate)
mdyDate=hebDate.split("/")
first=parseInt(mdyDate[1])
if((first==1)&&(ii!=0))
arrFirsts[++indexFirsts]=new firstDates(ii,hebDate);last=parseInt(hebDaysTotal)
for(i=first;i<=last;i++)
{if(ii<42)
arrN[ii++]=arrHebDate[i-1]
else break}}
for(i=0;i<42;i++){document.getElementById("heb"+i).innerHTML=arrN[i]
document.getElementById("heb"+i).style.font='10px Arial'}
document.getElementById("headlineheb").style.font='10px Arial'
var currBeginDate=(GregToHeb(new Date(currYear,currMonth,1))).split("/")
var currEndDate=(GregToHeb(new Date(currYear,currMonth,parseInt(maxDays(currMonth,currYear))))).split("/")
var currMonthMid=(GregToHeb(new Date(currYear,currMonth,16))).split("/")
var intCurrMonthBegin=parseInt(currBeginDate[0])
var intCurrMonthEnd=parseInt(currEndDate[0])
var intCurrMonthMid=parseInt(currMonthMid[0])
var intCurrYear=parseInt(currBeginDate[2])
currHebYear=intCurrYear;if(intCurrMonthEnd!=1)
{if(IsLeapYear(intCurrYear)){arrHebMonths[6]=ENUM_AdarBetCases[0]}
if(intCurrMonthBegin==intCurrMonthEnd){document.getElementById("headlineheb").innerHTML=arrHebMonths[intCurrMonthEnd-1]+' '+Nyear2Hyear(intCurrYear)}
else if((intCurrMonthBegin!=intCurrMonthMid)&&(intCurrMonthMid!=intCurrMonthEnd)){document.getElementById("headlineheb").innerHTML=arrHebMonths[intCurrMonthBegin-1]+' - '+arrHebMonths[intCurrMonthMid-1]+' - '+arrHebMonths[intCurrMonthEnd-1]+' '+Nyear2Hyear(intCurrYear)}
else
{document.getElementById("headlineheb").innerHTML=arrHebMonths[intCurrMonthBegin-1]+' - '+arrHebMonths[intCurrMonthEnd-1]+' '+Nyear2Hyear(intCurrYear)}}
else
{document.getElementById("headlineheb").innerHTML=arrHebMonths[intCurrMonthBegin-1]+' '+Nyear2Hyear(intCurrYear)+' - '+arrHebMonths[intCurrMonthEnd-1]+' '+Nyear2Hyear(intCurrYear+1)}
for(ii=0;ii<=41;ii++){toolTipCellText[ii]=""}
showCalendarEvents(arrFirsts,indexFirsts);showUserEvents();if(prefs.getString("shabbathTimes")=="Show")
{showZmaniKinsatVeyetziatShabbath();}}
function updateClock()
{var currentTime=new Date();var currentHours=currentTime.getHours();var currentMinutes=currentTime.getMinutes();currentMinutes=(currentMinutes<10?"0":"")+currentMinutes;var timeOfDay=(currentHours<12)?"AM":"PM";currentHours=(currentHours>12)?currentHours-12:currentHours;currentHours=(currentHours==0)?12:currentHours;var currentTimeString=currentHours+":"+currentMinutes+timeOfDay;document.getElementById("clockBox").innerHTML=currentTimeString;}
function changeStyleForCell(numid,cellStyle){dayid=document.getElementById("sp"+numid);hebid=document.getElementById("heb"+numid);id=document.getElementById("cellsp"+numid);id.borderWidths=0
id.style.font='14px Verdana'
dayid.style.font='14px Verdana'
id.borderWidths='0'
id.font='Verdana'
id.onmouseout=function(){hintout();doubleClickFlag=0;}
switch(cellStyle){case CURRENT_SATURDAY:id.style.backgroundColor=SHABBATHCELLBACKGROUND_COLOR
dayid.style.color='black'
hebid.style.color='black'
id.style.backgroundImage=''
break
case OTHER_SATURDAY:id.style.backgroundColor=SHABBATHCELLBACKGROUND_COLOR
dayid.style.color=OTHERMONTH_FORECOLOR
hebid.style.color=OTHERMONTH_FORECOLOR
id.style.backgroundImage=''
break
case CURRENT_WEEKDAY:id.style.backgroundColor=LIGHTBLUE_COLOR_CELLBACKGROUND
dayid.style.color='black'
hebid.style.color='black'
id.style.backgroundImage=''
break
case OTHER_WEEKDAY:id.style.backgroundColor=LIGHTBLUE_COLOR_CELLBACKGROUND
dayid.style.color=OTHERMONTH_FORECOLOR_WITHEVENT
hebid.style.color=OTHERMONTH_FORECOLOR_WITHEVENT
id.style.backgroundImage=''
break
case HALF_DAY:dayid.style.fontWeight='bold'
if((id.style.backgroundColor==SHABBATHCELLBACKGROUND_COLOR)||(id.style.backgroundColor==SHABBATHCELLBACKGROUND_COLOR_FIREFOX))
{id.style.backgroundImage='';break;}
if(dayid.style.color==OTHERMONTH_FORECOLOR_WITHEVENT||dayid.style.color==OTHERMONTH_FORECOLOR_WITHEVENT_FIREFOX){dayid.style.color=OTHERMONTH_FORECOLOR
hebid.style.color=OTHERMONTH_FORECOLOR}
id.style.backgroundImage="url("+DESIGN_LOCATION+"half"+just+".jpg)"
break
case FULL_DAY:if(dayid.style.color==OTHERMONTH_FORECOLOR_WITHEVENT||dayid.style.color==OTHERMONTH_FORECOLOR_WITHEVENT_FIREFOX){dayid.style.color=OTHERMONTH_FORECOLOR
hebid.style.color=OTHERMONTH_FORECOLOR}
id.style.backgroundColor=SHABBATHCELLBACKGROUND_COLOR
dayid.style.fontWeight='bold'
break}}
function dismissMiniMessages(){var i
for(i=0;i<messages.length;i++)
msg.dismissMessage(messages[i])}
function isGregorianLeapYear(y)
{return((y%400==0)||(y%100!=0&&y%4==0));}
function daysSinceYearBegun(d,m,y)
{m--;return arrComulativeDays[m]+d+(m>2&&isGregorianLeapYear(y));}
function suntime(dy,mn,yr,sundeg,sunmin,londeg,lonmin,ew,latdeg,latmin,ns,timezone)
{if(ew=="W")
ewi=-1;else
ewi=1;if(ns=="N")
nsi=1;else
nsi=-1;var success=0;longitude=(londeg+lonmin/60.0)*ewi;latitude=(latdeg+latmin/60.0)*nsi;var yday=daysSinceYearBegun(dy,mn,yr);var A=1.5708;var B=3.14159;var C=4.71239;var D=6.28319;var E=0.0174533*latitude;var F=0.0174533*longitude;var G=0.261799*timezone;var R=Math.cos(0.01745*(sundeg+sunmin/60.0));var J;for(i=0;i<2;i++)
{if(!i)
J=A;else
J=C;var K=yday+((J-F)/D);var L=(K*.017202)-.0574039;var M=L+.0334405*Math.sin(L);M+=4.93289+(3.49066E-04)*Math.sin(2*L);if(D==0){status=1;}
while(M<0)
M=(M+D);while(M>=D)
M=(M-D);if((M/A)-Math.floor(M/A)==0)
M+=4.84814E-06;var P=Math.sin(M)/Math.cos(M);P=Math.atan2(.91746*P,1);if(M>C)
P+=D;else{if(M>A)
P+=B;}
var Q=.39782*Math.sin(M);Q=Q/Math.sqrt(-Q*Q+1);Q=Math.atan2(Q,1);var S=R-(Math.sin(Q)*Math.sin(E));S=S/(Math.cos(Q)*Math.cos(E));if(Math.abs(S)>1)
status=1;S=S/Math.sqrt(-S*S+1);S=A-Math.atan2(S,1);if(!i)
S=D-S;var T=S+P-0.0172028*K-1.73364;var U=T-F;var V=U+G;if(D==0){status=1}
while(V<0)
V=V+D;while(V>=D)
V=V-D;V=V*3.81972;if(!i)
sunrise=V;else
sunset=V;}
var returnArray=new Array(status,sunrise,sunset);return returnArray;}
function adjustTime(t)
{var hour;var min;var time=t;var hour=Math.floor(time);var min=Math.floor((time-hour)*60.0+0.5);if(min>=60){hour+=1;min-=60;}
var ReturnTime=hour+':'+((min<10)?'0':'')+min;return ReturnTime;}
function calculateZmaniKinsatVeyetziatShabbath(dayG,monthG,yearG)
{var locationCoords=chosenLocation.split(",");NorthOrSouth=locationCoords[2];latd=parseInt(locationCoords[0]);latm=parseInt(locationCoords[1]);EastOrWest=locationCoords[5];lngd=parseInt(locationCoords[3]);lngm=parseInt(locationCoords[4]);tz=parseInt(locationCoords[6]);var arrZmanimRet=Array(2);var yom=new Date(yearG,monthG,dayG);hebDate=GregToHeb(new Date(yearG,monthG,dayG));hebDateApril2=GregToHeb(new Date(yearG,3,2));var mdyDate=hebDate.split("/")
var mdyDateApril2=hebDateApril2.split("/")
if(tz==2)
{if((monthG>2)&&(dayG>1))
{if(mdyDate[2]==mdyDateApril2[2])
{tz++;}
else if((mdyDate[2]>mdyDateApril2[2])&&(mdyDate[0]==1)&&(mdyDate[1]<10))
{tz++;}}}
time=suntime(dayG,monthG+1,yearG,98,30,lngd,lngm,EastOrWest,latd,latm,NorthOrSouth,tz);if(time[0]==0)
{arrZmanimRet[1]=adjustTime(time[2]);}
var day_before=new Date(yom.getTime()-86400000);db=day_before.getDate();mb=day_before.getMonth()+1;yb=day_before.getUTCFullYear();time=suntime(db,mb,yb,90,50,lngd,lngm,EastOrWest,latd,latm,NorthOrSouth,tz);arrZmanimRet[0]=adjustTime(time[2]-40.0/60.0);return arrZmanimRet;}
function showZmaniKinsatVeyetziatShabbath()
{var ii;var ZmaniShabbath=Array(2);var firstDayDisplayed=getFirstDayGregorian();var day1=getFirstDayOfTheMonth();var prevM=getPreviousMonth();var nextM=getNextMonth();var prevY=(currMonth==0)?(currYear-1):currYear;var nextY=(currMonth==11)?(currYear+1):currYear;var maxDaysPreviousMonth=maxDays((prevM),currYear);var maxDaysCurrMonth=maxDays(currMonth,currYear);for(ii=0;ii<day1;ii++){if((ii%7)==5)
{ZmaniShabbath=calculateZmaniKinsatVeyetziatShabbath(eval(firstDayDisplayed+"+"+ii),prevM,prevY);if(toolTipCellText[ii]!="")
toolTipCellText[ii]+="<BR>"
toolTipCellText[ii]+=ENUM_ShabbathText[0]+ZmaniShabbath[0];if(toolTipCellText[ii+1]!="")
toolTipCellText[ii+1]+="<BR>"
toolTipCellText[ii+1]+=ENUM_ShabbathText[1]+ZmaniShabbath[1];}}
for(ii=day1;ii<=day1+maxDaysCurrMonth-1;ii++){if(ii%7==5)
{ZmaniShabbath=calculateZmaniKinsatVeyetziatShabbath(eval(ii-day1+1),currMonth,currYear);if(toolTipCellText[ii]!="")
toolTipCellText[ii]+="<BR>"
toolTipCellText[ii]+=ENUM_ShabbathText[0]+ZmaniShabbath[0];if(toolTipCellText[ii+1]!="")
toolTipCellText[ii+1]+="<BR>"
toolTipCellText[ii+1]+=ENUM_ShabbathText[1]+ZmaniShabbath[1];}}
for(ii=day1+maxDaysCurrMonth;ii<=41;ii++)
{if(ii%7==5)
{ZmaniShabbath=calculateZmaniKinsatVeyetziatShabbath(eval(ii-maxDaysCurrMonth-day1+1),nextM,nextY);if(toolTipCellText[ii]!="")
toolTipCellText[ii]+="<BR>"
toolTipCellText[ii]+=ENUM_ShabbathText[0]+ZmaniShabbath[0];if(toolTipCellText[ii+1]!="")
toolTipCellText[ii+1]+="<BR>"
toolTipCellText[ii+1]+=ENUM_ShabbathText[1]+ZmaniShabbath[1];}}}
function showCalendarEvents(arrFirsts,indexFirsts){var j
var k
var cell1,cell2
var isMoved=new Array(1)
var tempholiday
var YEAR=2
var DAY=1
var MONTH=0
for(j=0;j<(indexFirsts+1);j++)
{var tempHebDate=arrFirsts[j].Date.split("/")
for(k=0;k<holidays[tempHebDate[MONTH]-1].length;k++)
{tempholiday=(holidays[tempHebDate[MONTH]-1][k].isMovable?cloneholiday(holidays[tempHebDate[MONTH]-1][k]):holidays[tempHebDate[MONTH]-1][k])
if(tempholiday.Hday>=tempHebDate[DAY])
{cell1=arrFirsts[j].id+tempholiday.Hday-tempHebDate[DAY]
cell2=moveEventIfNecessary(tempholiday,cell1)
if(cell2>41||cell2<0)
{continue;}
if(tempholiday.isHistoricalEvent)
if(!(isValidholiday(holidays[tempHebDate[MONTH]-1][k])))
continue;toolTipCellText[cell2]=tempholiday.desc
document.getElementById("sp"+cell2).style.fontWeight='bold'
if(tempholiday.eventType!=NONE)
{changeStyleForCell(cell2,tempholiday.eventType)}}}}}
function showUserEvents(){var events=(prefs.getString("mylist")).split("|")
if(events[0]=="")
return
var cell=-1
var day1
var firstCorner
var day2
var gEvent
var gDate=new Date()
var Hyear
var i,j
var jump=new Array(0,1,-1)
var tempEvent
var prevMonth=getPreviousMonth()
var nextMonth=getNextMonth()
for(i=0;i<events.length;i++)
{tempEvent=parseEventString(decodeStr(events[i]))
cell=-1
if(tempEvent.dateType==GREG_DATE)
{cell=calcCellForGregEvent(tempEvent)}
else if(tempEvent.dateType==HEB_DATE)
{for(j=0;j<jump.length;j++)
{Hyear=(parseInt(tempEvent.year)==-1?currHebYear:parseInt(tempEvent.year))
Hyear+=jump[j];if(!(hebDateExists(Hyear,parseInt(tempEvent.Hmonth),parseInt(tempEvent.Hday))))
continue;gDate=HebToGreg(Hyear,parseInt(tempEvent.Hmonth),parseInt(tempEvent.Hday));gEvent=cloneholiday(tempEvent)
gEvent.year=gDate.getUTCFullYear()
gEvent.Hmonth=gDate.getMonth()
gEvent.Hday=gDate.getDate()
cell=calcCellForGregEvent(gEvent)
if((parseInt(tempEvent.year)!=-1)||(cell>=0&&cell<=41))
break;}}
else
{continue;}
if(cell>=0&&cell<=41)
{if(prefs.getString("minimessages")=="Show")
{var directionOfMiniMessage=(chosenLanguage=="hebrew"?"rtl":"ltr");messages[messages.length]=msg.createStaticMessage("<p dir='"+directionOfMiniMessage+"'>"+eventToString(tempEvent)+" - "+tempEvent.desc+"</p>",_IG_AdjustIFrameHeight);}
if(toolTipCellText[cell]!="")
toolTipCellText[cell]+="<BR>"
toolTipCellText[cell]+=tempEvent.desc
document.getElementById("sp"+cell).style.fontWeight='bold'
document.getElementById("cellsp"+cell).style.backgroundImage="url("+DESIGN_LOCATION+"info5.gif)"}}}
function calcCellForGregEvent(tempEvent){var prevMonth=getPreviousMonth()
var nextMonth=getNextMonth()
var day1=getFirstDayOfTheMonth()
var firstCorner=getFirstDayGregorian()
var day2=day1+maxDays(currMonth,currYear)
var cell=-1
if((tempEvent.Hmonth==1)&&(tempEvent.Hday==29))
{if(maxDays(1,currYear)==28)
return-3;}
if((tempEvent.year!=-1)&&(tempEvent.year!=currYear))
{if((currMonth==0)&&(tempEvent.year==currYear-1)&&(tempEvent.Hmonth==11))
cell=tempEvent.Hday-firstCorner
if((currMonth==11)&&(tempEvent.year==currYear+1)&&(tempEvent.Hmonth==0))
cell=day2+tempEvent.Hday-1}
else if((tempEvent.year!=-1)&&(tempEvent.year==currYear)&&(currMonth==0)&&(tempEvent.Hmonth==11))
cell=-2;else if((tempEvent.year!=-1)&&(tempEvent.year==currYear)&&(currMonth==11)&&(tempEvent.Hmonth==0))
cell=-2;else
{switch(tempEvent.Hmonth)
{case prevMonth:cell=tempEvent.Hday-firstCorner
break
case currMonth:cell=day1+tempEvent.Hday-1
break
case nextMonth:cell=day2+tempEvent.Hday-1
break
default:cell=-2}}
return cell;}
function eventToString(userEvent){var str=""
if(userEvent.dateType==GREG_DATE)
{str+=""+userEvent.Hday
str+=" "
if(ENUM_ListEventsTabText[1]!="Empty")
{str+=ENUM_ListEventsTabText[1];}
str+=arrGregMonths[userEvent.Hmonth]
str+=", "
str+=(userEvent.year==-1?eventTextYearly:(""+userEvent.year))}
else
{str+=arrHebDate[userEvent.Hday-1]
str+=" "
if(ENUM_ListEventsTabText[1]!="Empty")
{str+=ENUM_ListEventsTabText[1];}
str+=arrHebMonths[userEvent.Hmonth-1]
str+=", "
str+=(userEvent.year==-1?eventTextYearly:(""+Nyear2Hyear(userEvent.year)))}
return str}
function cloneholiday(h){var temp=new holiday(h.desc,h.Hmonth,h.Hday,h.eventType)
temp.isTzom=h.isTzom
temp.isHistoricalEvent=h.isHistoricalEvent
temp.isMovable=h.isMovable
return temp}
function moveEventIfNecessary(tempholiday,cell){if(tempholiday.isMovable==1)
{if(tempholiday.isTzom==1)
{if(cell%7==6)
{cell+=1
tempholiday.desc+=" - "+ENUM_GeneralText_EarliedOrPostponed[1];}}
else if(tempholiday.desc==ENUM_Holidays[21]||tempholiday.desc==ENUM_Holidays[22]||tempholiday.desc==ENUM_Holidays[23])
{if(hebDateExists(currHebYear,3,30))
{cell-=1}}
else if(tempholiday.desc==ENUM_Holidays[26])
{if(cell%7==6)
{cell-=2
tempholiday.desc+=" - "+ENUM_GeneralText_EarliedOrPostponed[0];}}
else if(tempholiday.desc==ENUM_Holidays[38])
{if(cell%7==5)
{cell-=1
tempholiday.desc+=" - "+ENUM_GeneralText_EarliedOrPostponed[0];}
else if(cell%7==0)
{cell+=1
tempholiday.desc+=" - "+ENUM_GeneralText_EarliedOrPostponed[1];}}
else if(tempholiday.desc==ENUM_Holidays[14])
{if(cell%7==5)
{cell-=1
tempholiday.desc+=" - "+ENUM_GeneralText_EarliedOrPostponed[0];}
else if(cell%7==6)
{cell-=2
tempholiday.desc+=" - "+ENUM_GeneralText_EarliedOrPostponed[0];}}
else if(tempholiday.desc==ENUM_Holidays[38])
{if(currYear==1950)
{cell-=1
tempholiday.desc+=" - "+ENUM_GeneralText_EarliedOrPostponed[0];tempholiday.eventType=NONE}
else
{if(cell%7==5)
{cell-=2
tempholiday.desc+=" - "+ENUM_GeneralText_EarliedOrPostponed[0];}
else if(cell%7==4)
{cell-=1
tempholiday.desc+=" - "+ENUM_GeneralText_EarliedOrPostponed[0];}
else if(cell%7==0)
{cell+=1
tempholiday.desc+=" - "+ENUM_GeneralText_EarliedOrPostponed[1];}}}
else if(tempholiday.desc==ENUM_Holidays[39])
{if(currYear==1950)
{toolTipCellText[cell]=ENUM_GeneralText_EarliedOrPostponed[2]+" "+ENUM_Holidays[39]+" - "+ENUM_GeneralText_EarliedOrPostponed[1];cell+=1
tempholiday.desc+=" - "+ENUM_GeneralText_EarliedOrPostponed[1];}
else
{if(cell%7==6)
{cell-=2
tempholiday.desc+=" - "+ENUM_GeneralText_EarliedOrPostponed[0];}
else if(cell%7==5)
{cell-=1
tempholiday.desc+=" - "+ENUM_GeneralText_EarliedOrPostponed[0];}
else if(cell%7==1)
{cell+=1
tempholiday.desc+=" - "+ENUM_GeneralText_EarliedOrPostponed[1];}}}}
return cell}
function isValidholiday(toCheck){var flag=true
if(currYear<1997)
{if(toCheck.desc==ENUM_Holidays[14])
flag=false}
if(currYear<1968)
{if(toCheck.desc==ENUM_Holidays[41])
flag=false}
if(currYear<1959)
{if(toCheck.desc==ENUM_Holidays[37])
flag=false}
if(currYear<1950)
{if(toCheck.desc==ENUM_Holidays[38])
flag=false}
if(currYear<1949)
{if(toCheck.desc==ENUM_Holidays[39])
flag=false}
return flag}
function clickedCell(cellNum){if((cellNum>7)&&(cellNum<27))
return;var intDay=document.getElementById("sp"+cellNum).innerHTML;if((cellNum<7)&&(intDay>20)){doubleClickFlag=1
changedate(-1,0);hintout();return;}
if((cellNum>27)&&(intDay<20)){doubleClickFlag=1
changedate(1,0);hintout();return;}}
function doubleClickedCell(cell){if(doubleClickFlag==0)
{var day1=getFirstDayOfTheMonth()
if((cell<day1)||(cell>day1+maxDays(currMonth,currYear)))
return;currDay=cell-day1+1
tabs.setSelectedTab(1);var elemDescription=document.getElementById("EventDescription")
elemDescription.focus();}
doubleClickFlag=0}
function changedate(mm,yy){if((currMonth==11)&&(mm==1)){currYear+=1
currMonth=0}
else if((currMonth==0)&&(mm==-1)){currYear-=1
currMonth=11}
else
{currMonth+=mm
currYear+=yy}
changeCal()
changeCalHebrew()}
function hint(e,cellNum){var marq;var desc=toolTipCellText[cellNum];if(desc=="")return;var mousex;var Spread;var IE=document.all?true:false;document.getElementById('hintdesc').innerHTML=desc;document.getElementById('hint').style.visibility="visible";var upSpace=(((document.getElementById("hintdesc").offsetHeight)/16)-1)*16+25;if(IE){if(document.documentElement&&!document.documentElement.scrollTop){mousex=getMouseX(event.clientX,desc,cellNum);mousey=event.clientY-upSpace;}else if(document.documentElement&&document.documentElement.scrollTop){mousex=getMouseX(event.clientX+document.documentElement.scrollLeft,desc,cellNum);mousey=(event.clientY+document.documentElement.scrollTop)-upSpace;}else if(document.body&&document.body.scrollTop){mousex=getMouseX(event.clientX+document.body.scrollLeft,desc,cellNum);mousey=(event.clientY+document.body.scrollTop)-upSpace;}
if(mousex<0)mousex=0;if(mousey<0)mousey=0;document.getElementById('hint').style.top=mousey+"px";document.getElementById('hint').style.left=mousex+"px";}else{mousey=e.pageY-upSpace;mousex=getMouseX(e.pageX,desc,cellNum);if(mousex<0)mousex=0;if(mousey<0)mousey=0;document.getElementById('hint').style.top=mousey+"px";document.getElementById('hint').style.left=mousex+"px";}}
function getMouseX(LocationX,desc,cellNum){var mousex;var Spread;var Space=15;var RightMost=document.getElementById("headl").offsetLeft+document.getElementById("headl").offsetWidth;var LeftMost=document.getElementById("headl").offsetLeft;var cellNumber=parseInt(cellNum)%7;var widthOfToolTip=document.getElementById("hintdesc").offsetWidth+5;if(!LeftToRight){cellNumber=6-cellNumber;}
switch(cellNumber){case 0:case 1:case 2:mousex=LocationX+Space-15;Spread=mousex+widthOfToolTip;if(Spread>RightMost)
mousex=mousex-(Spread-RightMost)+((LocationX-LeftMost)%40)-40;break;case 3:mousex=LocationX-(widthOfToolTip/2);Spread=mousex+(widthOfToolTip/2);if(Spread>RightMost)
mousex=mousex-(Spread-RightMost)+((LocationX-LeftMost)%40)-40;break;case 4:case 5:mousex=LocationX-widthOfToolTip;if(mousex<LeftMost+40)
mousex=mousex+(LeftMost-mousex)+((LocationX-LeftMost)%40);break;case 6:mousex=LocationX-widthOfToolTip;break;}
return mousex;}
function hintout(){document.getElementById('hint').style.visibility='hidden';}
function listEvents(tabId){if(loaded==false)
{ExecuteFunctionAfterReadingXML("listEvents",tabId);return;}
editMode=false;tabs.getTabs()[1].getNameContainer().innerHTML=ENUM_TabsNames[2];var events=(prefs.getString("mylist")).split("|")
var i,eventCount=events.length;var writeText="";var directionOfForm="ltr";var directionToAlign="left";var alignmentOfRemove="right";if(chosenLanguage=="hebrew")
{directionOfForm="rtl";directionToAlign="right";alignmentOfRemove="left";}
currentGregOrHeb=""
if(events[0]==""){writeText+="<div align='center'><font face='Arial' style='font-size: 9pt; font-weight: 700'><BR>"+ENUM_ListEventsTabText[0]+" </font></div>";}
else
{writeText="<table dir='"+directionOfForm+"' id='tableList' border='0' style='border-collapse: collapse; '>"
for(i=0;i<eventCount;i++){var currEvent=parseEventString(decodeStr(events[i]));writeText+="<tr align='"+directionToAlign+"' bgcolor='"+((i%2)==0?"#ECF5FF":"#FFFFFF")+"' onmousemove='boldLine("+i+");' onmouseout='unBoldLine("+i+");' >"
writeText+="<td width='25' align='center' onclick='editEvent("+i+")' style= 'cursor: pointer;'><font face='Arial' style='font-size: 9pt'><span id='serial"+i+"'>"+(i+1)+"</span></font></td>"
writeText+="<td width='270' align='"+directionToAlign+"' onclick='editEvent("+i+")' style= 'cursor: pointer;'><font face='Arial' style='font-size: 9pt'><span id='description"+i+"'>"+currEvent.desc+"</span></font></td>"
writeText+="<td width='295' align='"+directionToAlign+"' onclick='editEvent("+i+")' style= 'cursor: pointer;'><font face='Arial' style='font-size: 9pt'><span lang='he'><span id='strDate"+i+"'>"+eventToString(currEvent)+"</span></span></font></td>"
writeText+="<td align='"+alignmentOfRemove+"' width='110'> <img border='0' src='"+DESIGN_LOCATION+"x2.gif' style='cursor: pointer' onclick='deleteEvent("+i+")'> </td>"
writeText+="</tr>"}
writeText+="</table>"
if(eventCount>1)
writeText+="<div align='center' dir='"+directionOfForm+"'><font face='Arial' style='font-size: 9pt; font-weight: 700'><BR>"+eventCount+" "+ENUM_ListEventsTabText[2]+" </font></div>";else
writeText+="<div align='center' dir='"+directionOfForm+"'><font face='Arial' style='font-size: 9pt; font-weight: 700'><BR>"+ENUM_ListEventsTabText[3]+" </font></div>";}
document.getElementById(tabId).innerHTML=writeText;autoAdjustHeight();}
function boldLine(index){document.getElementById("serial"+index).style.color='red'
document.getElementById("description"+index).style.color='red'
document.getElementById("strDate"+index).style.color='red'}
function unBoldLine(index){document.getElementById("serial"+index).style.color='black'
document.getElementById("description"+index).style.color='black'
document.getElementById("strDate"+index).style.color='black'}
function addEventForm(tabId){if(loaded==false)
{ExecuteFunctionAfterReadingXML("addEventForm",tabId);return;}
var directionOfForm="ltr";var directionToAlign="left";var alignmentOfRemove="right";if(chosenLanguage=="hebrew")
{directionOfForm="rtl";directionToAlign="right";alignmentOfRemove="left";}
var text="<form id='NewEvent' action='javascript:submitEvent()' Method='GET'"
text+="<p dir='"+directionOfForm+"'>&nbsp;&nbsp;&nbsp;<input type='radio' value='AddHebDate' id = 'rr1' name='R1' onclick='updateDropDownBoxes()'><font face='Arial' size='2.5'><span lang='he'> "+ENUM_EventTabText[0];text+="</span>&nbsp;&nbsp;&nbsp;"
text+="<input type='radio' value='AddGregDate' checked id = 'R1' name='R1' onclick='updateDropDownBoxes()'><span lang='he'> "+ENUM_EventTabText[1]+"</span></p>"
text+="<p dir='"+directionOfForm+"'>&nbsp;&nbsp;&nbsp;&nbsp;<span lang='he'>"+ENUM_EventTabText[2]+" <input type='text' id='EventDescription' size='21' maxlength='21'></span></p>"
text+="<p dir='"+directionOfForm+"'>&nbsp;&nbsp;&nbsp;&nbsp;<span lang='he'>"+ENUM_EventTabText[3]+": <select size='1' id='EventDay'></select> &nbsp;&nbsp;&nbsp; "
text+=ENUM_EventTabText[4]+":&nbsp;<select size='1' id='EventMonth' onchange='updateDays()'></select> &nbsp;&nbsp;&nbsp; </span></p>"
text+="<p dir='"+directionOfForm+"'>&nbsp;&nbsp;&nbsp;<span lang='he'> "+ENUM_EventTabText[5]+":&nbsp;"
text+="<select size='1' id='EventYear' onchange='updateDays()'></select></span>"
text+="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
text+="<input type='Checkbox' id='annually' value='ON' onclick='updateYearField()'>&nbsp;"+ENUM_EventTabText[6]+"</p>"
text+="<p dir='"+directionOfForm+"'>&nbsp;&nbsp;&nbsp;"
text+="<input type='button' value='"+ENUM_EventTabText[7]+"' id='add' onclick='submitEvent()'>&nbsp;&nbsp;&nbsp; <input type='button' value='"+ENUM_EventTabText[8]+"' id='reset' onclick='clearText()'></p>"
text+="</font></form>"
text+="<table id='alert' bordercolor="+BORDER_COLOR+" cellspacing='0' cellpadding='2' style='position: absolute;visibility:hidden; border-collapse: collapse ' border='1'>"
text+="<tr>"
text+="<td bgcolor="+HINTCOLORBACKGROUND+"><font face='Arial' size='2'> <div id='alertdesc'>"
text+="</div></font></td>"
text+="</tr>"
text+="</table>"
text+="<br>"
document.getElementById(tabId).innerHTML=text;var elemYear=document.getElementById("EventYear")
var elemMonth=document.getElementById("EventMonth")
var elemDay=document.getElementById("EventDay")
var elemDesc=document.getElementById("EventDescription")
var elemAdd=document.getElementById("add")
var elemReset=document.getElementById("reset")
elemDay.style.font='13px Arial'
elemMonth.style.font='13px Arial'
elemYear.style.font='13px Arial'
elemDesc.style.font='13px Arial'
elemAdd.style.font='13px Arial'
elemReset.style.font='13px Arial'
updateDropDownBoxes();autoAdjustHeight();var elemDescription=document.getElementById("EventDescription")
elemDescription.focus();}
function submitEvent(){var elemDescription=document.getElementById("EventDescription")
var elemYear=document.getElementById("EventYear")
var elemMonth=document.getElementById("EventMonth")
var elemDay=document.getElementById("EventDay")
var elemAnnually=document.getElementById("annually")
if(elemDescription.value==""){displayMessage(ENUM_EventTabMessagesToUser[0]);elemDescription.focus();return;}
var monthSelected=parseInt(elemMonth.options[elemMonth.selectedIndex].value);var yearSelected=parseInt(elemYear.options[elemYear.selectedIndex].value);var daySelected=parseInt(elemDay.options[elemDay.selectedIndex].value);var GregOrHeb=(currentGregOrHeb=="AddGregDate")?"g":"h";var bool=addEventToList(GregOrHeb,elemDescription.value,daySelected,monthSelected,yearSelected,elemAnnually.checked);if(bool==1)
{if(editMode==true){displayMessage(ENUM_EventTabMessagesToUser[1]);tabs.getTabs()[1].getNameContainer().innerHTML=ENUM_TabsNames[2];deleteEvent(editingIndex);}
else
displayMessage(ENUM_EventTabMessagesToUser[2]);document.getElementById('EventDescription').value=''
elemDescription.focus();}
else if(bool==-1)
displayMessage(ENUM_EventTabMessagesToUser[3]);else if(bool==-2)
displayMessage(ENUM_EventTabMessagesToUser[4]);}
function displayMessage(textToDisplay){document.getElementById('alertdesc').innerHTML=textToDisplay;document.getElementById('alert').style.visibility="visible"
document.getElementById('alert').style.top=(document.getElementById('add').offsetTop+30)+"px"
if(chosenLanguage=="hebrew")
{document.getElementById('alert').style.left=(document.getElementById('add').offsetLeft+document.getElementById('add').offsetWidth-document.getElementById('alert').offsetWidth)+"px"}
else
{document.getElementById('alert').style.left=(document.getElementById('add').offsetRight+document.getElementById('add').offsetWidth-document.getElementById('alert').offsetWidth)+"px"}
opacity('alert',0,100,500);setTimeout("opacity('alert',100,0,500)",2000);}
function opacity(id,opacStart,opacEnd,millisec){var speed=Math.round(millisec/100);var timer=0;if(opacStart>opacEnd){for(i=opacStart;i>=opacEnd;i--){setTimeout("changeOpac("+i+",'"+id+"')",(timer*speed));timer++;}}else if(opacStart<opacEnd){for(i=opacStart;i<=opacEnd;i++)
{setTimeout("changeOpac("+i+",'"+id+"')",(timer*speed));timer++;}}}
function changeOpac(opacity,id){var object=document.getElementById(id).style;object.opacity=(opacity/100);object.MozOpacity=(opacity/100);object.KhtmlOpacity=(opacity/100);object.filter="alpha(opacity="+opacity+")";}
function addEventToList(GorH,TextDescription,day,month,year,annually){day++;var events=(prefs.getString("mylist")).split("|");eventCount=events.length;if((eventCount==45)&&(editMode==false))return-2
var events=prefs.getString("mylist");if(GorH=='h')month++;var eventStr=annually==true?GorH+"~"+TextDescription+"_"+day+"/"+month:GorH+"~"+TextDescription+"_"+day+"/"+month+"/"+year
if(TextDescription.split("~").length>1)return-1;if(TextDescription.split("_").length>1)return-1;if(TextDescription.split("/").length>1)return-1;if(TextDescription.split("|").length>1)return-1;if(TextDescription.split(")").length>1)return-1;if(TextDescription.split("(").length>1)return-1;if(events!="")
events+="|"+encodeStr(eventStr);else
events=encodeStr(eventStr);prefs.set("mylist",events);return 1;}
function updateDropDownBoxes(){var i;var elemYear=document.getElementById("EventYear")
var elemMonth=document.getElementById("EventMonth")
var elemDay=document.getElementById("EventDay")
var currYearLeap=IsLeapYear(currHebYear);var GregOrHeb=document.getElementById("rr1").checked==false?"AddGregDate":"AddHebDate"
if(GregOrHeb==currentGregOrHeb)
return;currentGregOrHeb=GregOrHeb;while(elemDay.options.length>0){elemDay.options[0]=null;}
while(elemMonth.options.length>0){elemMonth.options[0]=null;}
while(elemYear.options.length>0){elemYear.options[0]=null;}
if(GregOrHeb=="AddGregDate"){for(i=0;i<maxDays(currMonth,currYear);i++){var optn=document.createElement("OPTION");optn.text=i+1;optn.value=i;elemDay.options.add(optn);}
for(i=0;i<12;i++){var optn=document.createElement("OPTION");optn.text=arrGregMonths[i];optn.value=i;elemMonth.options.add(optn);}
for(i=-100;i<101;i++){var optn=document.createElement("OPTION");optn.text=currYear+i;optn.value=currYear+i;elemYear.options.add(optn);}
elemYear.options.selectedIndex=100;elemDay.options.selectedIndex=currDay-1;elemMonth.options.selectedIndex=currMonth;}
else
{for(i=0;i<30;i++){elemDay.clear;var optn=document.createElement("OPTION");optn.text=arrHebDate[i];optn.value=i;elemDay.options.add(optn);}
for(i=0;i<13;i++){if(i==5){if(currYearLeap)
{arrHebMonths[6]=ENUM_AdarBetCases[0];}
else
{arrHebMonths[6]=ENUM_AdarBetCases[1];continue;}}
var optn=document.createElement("OPTION");optn.text=arrHebMonths[i];optn.value=i
elemMonth.options.add(optn);}
for(i=-100;i<101;i++){var optn=document.createElement("OPTION");optn.text=Nyear2Hyear(currHebYear+i);optn.value=currHebYear+i;elemYear.options.add(optn);}
var hDate=(GregToHeb(new Date(currYear,currMonth,currDay))).split("/")
elemYear.options.selectedIndex=100;if((!currYearLeap)&&(parseInt(hDate[0])>6))
elemMonth.options.selectedIndex=parseInt(hDate[0])-2;else
elemMonth.options.selectedIndex=parseInt(hDate[0])-1;elemDay.options.selectedIndex=parseInt(hDate[1])-1;}}
function deleteEvent(indexToDelete){var events=(prefs.getString("mylist")).split("|");eventCount=events.length;var finalEvents="";var separator="";var ii;for(ii=0;ii<eventCount;ii++)
{if(ii==indexToDelete)
continue;finalEvents+=separator+events[ii];separator="|";}
prefs.set("mylist",finalEvents);tabs.setSelectedTab(1);tabs.setSelectedTab(2);}
function editEvent(i){var now=new Date();tabs.getTabs()[1].getNameContainer().innerHTML=ENUM_TabsNames[1];editMode=true;editingIndex=i;var events=(prefs.getString("mylist")).split("|")
var currEvent=parseEventString(events[i]);currEvent.desc=decodeStr(currEvent.desc)
if(currEvent.dateType==HEB_DATE){var gDate;if(currEvent.year==-1)
gDate=HebToGreg(""+currHebYear,currEvent.Hmonth,currEvent.Hday-1);else
gDate=HebToGreg(currEvent.year,currEvent.Hmonth,currEvent.Hday-1);currDay=gDate.getDate();currMonth=gDate.getMonth();currYear=gDate.getUTCFullYear();if(currEvent.year!=-1)
currHebYear=parseInt(currEvent.year)}
else
{if(currEvent.year!=-1)
currYear=parseInt(currEvent.year)
else
currYear=now.getUTCFullYear()
currDay=currEvent.Hday
currMonth=currEvent.Hmonth
var mdyDate=(GregToHeb(new Date(currYear,currMonth,currDay))).split("/")
currHebYear=parseInt(mdyDate[2])}
tabs.setSelectedTab(1);var elemDescription=document.getElementById("EventDescription")
var elemYear=document.getElementById("EventYear")
var elemMonth=document.getElementById("EventMonth")
var elemDay=document.getElementById("EventDay")
var elemAnnually=document.getElementById("annually")
if(currEvent.dateType==HEB_DATE)
document.getElementById("rr1").checked=true
if(currEvent.year==-1)
elemAnnually.checked=true;document.getElementById("add").value=ENUM_TabsNames[1];elemDescription.value=currEvent.desc;updateDropDownBoxes();updateYearField();if(currEvent.dateType==HEB_DATE){elemDay.options.selectedIndex=currEvent.Hday-1;var i=1;elemMonth.options.selectedIndex=i;while((elemMonth.options[elemMonth.options.selectedIndex].value<currEvent.Hmonth-1))
elemMonth.options.selectedIndex=++i;}}
function updateYearField(){if(document.getElementById("annually").checked){document.getElementById("EventYear").disabled=true;return;}
document.getElementById("EventYear").disabled=false;}
function updateDays(){var elemYear=document.getElementById("EventYear")
var elemMonth=document.getElementById("EventMonth")
var elemDay=document.getElementById("EventDay")
var monthSelected=parseInt(elemMonth.options[elemMonth.selectedIndex].value);var yearSelected=parseInt(elemYear.options[elemYear.selectedIndex].value)
var getMaxDays;if(currentGregOrHeb=="AddGregDate")
getMaxDays=maxDays(monthSelected,yearSelected);else
{if(IsLeapYear(yearSelected)){if(elemMonth.options[6].text!=ENUM_AdarBetCases[0]){arrHebMonths[6]=ENUM_AdarBetCases[0];for(i=5;i<12;i++){elemMonth.options[i].text=arrHebMonths[i];elemMonth.options[i].value=i+1;}
var optn=document.createElement("OPTION");optn.text=arrHebMonths[12];optn.value=12;elemMonth.options.add(optn);}}
else
{if(elemMonth.options[6].text==ENUM_AdarBetCases[0]){elemMonth.options[5].text=ENUM_AdarBetCases[1]
elemMonth.options[5].value=6
elemMonth.options[6]=null;}
monthSelected=parseInt(elemMonth.options[elemMonth.selectedIndex].value);}
getMaxDays=daysInHebMonth((monthSelected+1)+"/01/"+yearSelected);}
var currDays=elemDay.options.length;while(getMaxDays!=currDays){if(getMaxDays>currDays){var optn=document.createElement("OPTION");if(currentGregOrHeb=="AddHebDate")
optn.text=arrHebDate[currDays];else
optn.text=currDays+1;optn.value=currDays+1;elemDay.options.add(optn);currDays++;}
if(getMaxDays<currDays){elemDay.options[currDays-1]=null;currDays--;}}}
function clearText(){document.getElementById("EventDescription").value="";document.getElementById("annually").checked=false;document.getElementById("EventYear").disabled=false;}
function parseEventString(eventString){var DAY=0
var MONTH=1
var YEAR=2
var type_rest=eventString.split("~")
var title_date=type_rest[1].split("_")
var parsedDate=title_date[1].split("/")
var userEvent=new holiday(title_date[0],parseInt(parsedDate[MONTH]),parseInt(parsedDate[DAY]),NONE)
if(type_rest[0]=='g')
{userEvent.dateType=GREG_DATE}
else if(type_rest[0]=="h")
{userEvent.dateType=HEB_DATE}
else
return false
if(parsedDate.length==3)
userEvent.year=parsedDate[YEAR]
return userEvent}
function disableSelection(target){if(typeof target.onselectstart!="undefined")
target.onselectstart=function(){return false}
else if(typeof target.style.MozUserSelect!="undefined")
target.style.MozUserSelect="none"
else
target.onmousedown=function(){return false}
target.style.cursor="default"}
function maxDays(mm,yyyy){var mDay;if((mm==3)||(mm==5)||(mm==8)||(mm==10)){mDay=30;}
else{mDay=31
if(mm==1){if(yyyy%4!=0){mDay=28}
else if((yyyy%100==0)&&(yyyy%400!=0)){mDay=28}
else{mDay=29}}}
return mDay;}
function getPreviousMonth(){return((currMonth+11)%12)}
function getNextMonth(){return((currMonth+1)%12)}
function getFirstDayOfTheMonth(){var mmyyyy=new Date()
mmyyyy.setUTCFullYear(currYear)
mmyyyy.setDate(1)
mmyyyy.setMonth(currMonth)
var day1=mmyyyy.getDay()
if(day1==0){day1=7}
return day1}
function getFirstDayGregorian(){var ii=document.getElementById("sp"+0).innerHTML
return ii}
function encodeStr(strIn){var HEBREW_SHIFTING=1488
var ENGLISH_SHIFTING=65
var strOut="";var HebEncodings=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","(",")")
var EngEncodings=new Array("ZA","ZB","ZC","ZD","ZE","ZF","ZG","ZH","ZI","ZJ","ZK","ZL","ZM","ZN","ZO","ZP","ZQ","ZR","ZS","ZT","ZU","ZV","ZW","ZX","ZY","ZZ")
var i
var c
for(i=0;i<strIn.length;i++)
{c=strIn.charCodeAt(i)
if(isHebLetter(c))
{c-=HEBREW_SHIFTING
strOut+=HebEncodings[c]}
else if(isEngLetter(c))
{c-=ENGLISH_SHIFTING
strOut+=EngEncodings[c]}
else
strOut+=strIn.charAt(i)}
return strOut}
function decodeStr(strIn){var NORMAL_SHIFTING=65
var SPECIAL_SHIFTING=40
var hebDecodings=new Array("א","ב","ג","ד","ה","ו","ז","ח","ט","י","ך","כ","ל","ם","מ","ן","נ","ס","ע","ף","פ","ץ","צ","ק","ר")
var hebSpecialCase=new Array("ש","ת")
var strOut=""
var i
var unicode
for(i=0;i<strIn.length;i++)
{if(strIn.charAt(i)=='Z')
{i++
strOut+=strIn.charAt(i)}
else if(isEngLetter(unicode=strIn.charCodeAt(i)))
{strOut+=hebDecodings[unicode-NORMAL_SHIFTING]}
else if((unicode>=40)&&(unicode<=41))
{strOut+=hebSpecialCase[unicode-SPECIAL_SHIFTING]}
else
strOut+=strIn.charAt(i)}
return strOut}
function hebDateExists(yyyy,mm,dd){var verifyDate=GregToHeb((HebToGreg(yyyy,mm,dd)))
var hDateSplitted=verifyDate.split("/")
return(hDateSplitted[0]==mm&&hDateSplitted[1]==dd&&hDateSplitted[2]==yyyy)}
function Nyear2Hyear(numYear){if(chosenLanguage!="hebrew")
{return numYear;}
var gim=new Array(1,2,3,4,5,6,7,8,9,10,20,30,40,50,60,70,80,90,100,200,300,400)
var alphabet=new Array("א","ב","ג","ד","ה","ו","ז","ח","ט","י","כ","ל","מ","נ","ס","ע","פ","צ","ק","ר","ש","ת")
var i
var hebYear=""
numYear%=1000
for(i=21;i>=0;i--)
{while(numYear>=gim[i])
{if((i!=9)||((i=9)&&(numYear!=15)&&(numYear!=16)))
{numYear-=gim[i]
if((numYear==0)&&(hebYear.length>1))
{hebYear+="\""}
hebYear+=alphabet[i]}
else
{if(numYear==15)
hebYear+="ט\"ו"
if(numYear==16)
hebYear+="ט\"ז"
numYear=0}}}
return hebYear}
function daysInHebMonth(hebFullDate){var YEAR=2
var DAY=1
var MONTH=0
var hDate=hebFullDate.split("/")
var date1=HebToGreg(parseInt(hDate[YEAR]),parseInt(hDate[MONTH]),1)
var date2=(parseInt(hDate[MONTH])==13?HebToGreg(parseInt(hDate[YEAR])+1,1,1):HebToGreg(parseInt(hDate[YEAR]),parseInt(hDate[MONTH])+1,1))
var datediff=Math.round((date2-date1)/86400000)
return datediff}
function isHebLetter(c){return((c>=1488)&&(c<=1514))}
function isEngLetter(c){return((c>=65)&&(c<=90))}
function autoAdjustHeight(){_IG_AdjustIFrameHeight();}
function tauExam(){var courseString=prefs.getString("rawquery");var course=JSON.parse(courseString);var courseName=course.name;var type_date=course.data.split("@");if(type_date[0]!="test")
return;var examDate=type_date[1].split("/");addEventToList("g","מבחן ב"+courseName,examDate[0],examDate[1],examDate[2],false);}
function holiday(desc,Hmonth,Hday,eventType){this.isTzom=0;this.isMovable=0;this.isHistoricalEvent=0
this.isAnnually=1
this.dateType=HEB_DATE
this.desc=desc;this.Hmonth=Hmonth;this.Hday=Hday;this.year=-1
this.eventType=eventType;}
function firstDates(id,Date){this.id=id;this.Date=Date;}
function MonSinceFirstMolad(nYearH){var nMonSinceFirstMolad
nYearH--
nMonSinceFirstMolad=Math.floor(nYearH/19)*235
nYearH=nYearH%19
nMonSinceFirstMolad+=12*nYearH
if(nYearH>=17){nMonSinceFirstMolad+=6}else if(nYearH>=14){nMonSinceFirstMolad+=5}else if(nYearH>=11){nMonSinceFirstMolad+=4}else if(nYearH>=8){nMonSinceFirstMolad+=3}else if(nYearH>=6){nMonSinceFirstMolad+=2}else if(nYearH>=3){nMonSinceFirstMolad+=1}
return nMonSinceFirstMolad}
function IsLeapYear(nYearH){var nYearInCycle
nYearInCycle=nYearH%19
return(nYearInCycle==3||nYearInCycle==6||nYearInCycle==8||nYearInCycle==11||nYearInCycle==14||nYearInCycle==17||nYearInCycle==0)}
function Tishrei1(nYearH){var nMonthsSinceFirstMolad
var nChalakim
var nHours
var nDays
var nDayOfWeek
var dTishrei1
nMonthsSinceFirstMolad=MonSinceFirstMolad(nYearH)
nChalakim=793*nMonthsSinceFirstMolad
nChalakim+=204
nHours=Math.floor(nChalakim/1080)
nChalakim=nChalakim%1080
nHours+=nMonthsSinceFirstMolad*12
nHours+=5
nDays=Math.floor(nHours/24)
nHours=nHours%24
nDays+=29*nMonthsSinceFirstMolad
nDays+=2
nDayOfWeek=nDays%7
if(!IsLeapYear(nYearH)&&nDayOfWeek==3&&(nHours*1080)+nChalakim>=(9*1080)+204){nDayOfWeek=5
nDays+=2}
else if(IsLeapYear(nYearH-1)&&nDayOfWeek==2&&(nHours*1080)+nChalakim>=(15*1080)+589){nDayOfWeek=3
nDays+=1}
else{if(nHours>=18){nDayOfWeek+=1
nDayOfWeek=nDayOfWeek%7
nDays+=1}
if(nDayOfWeek==1||nDayOfWeek==4||nDayOfWeek==6){nDayOfWeek+=1
nDayOfWeek=nDayOfWeek%7
nDays+=1}}
nDays-=2067025
dTishrei1=new Date(1900,0,1)
dTishrei1.setDate(dTishrei1.getDate()+nDays)
return dTishrei1}
function LengthOfYear(nYearH){var dThisTishrei1
var dNextTishrei1
var diff
dThisTishrei1=Tishrei1(nYearH)
dNextTishrei1=Tishrei1(nYearH+1)
diff=(dNextTishrei1-dThisTishrei1)/(1000*60*60*24)
return Math.round(diff)}
function HebToGreg(nYearH,nMonthH,nDateH){var nLengthOfYear
var bLeap
var dGreg
var nMonth
var nMonthLen
var bHaser
var bShalem
bLeap=IsLeapYear(nYearH)
nLengthOfYear=LengthOfYear(nYearH)
bHaser=(nLengthOfYear==353||nLengthOfYear==383)
bShalem=(nLengthOfYear==355||nLengthOfYear==385)
dGreg=Tishrei1(nYearH)
for(nMonth=1;nMonth<=nMonthH-1;nMonth++){if(nMonth==1||nMonth==5||nMonth==8||nMonth==10||nMonth==12){nMonthLen=30}else if(nMonth==4||nMonth==7||nMonth==9||nMonth==11||nMonth==13){nMonthLen=29}else if(nMonth==6){nMonthLen=(bLeap?30:0)}else if(nMonth==2){nMonthLen=(bShalem?30:29)}else if(nMonth==3){nMonthLen=(bHaser?29:30)}
dGreg.setDate(dGreg.getDate()+nMonthLen)}
dGreg.setDate(dGreg.getDate()+nDateH-1)
return dGreg}
function GregToHeb(dGreg){var nYearH
var nMonthH
var nDateH
var nOneMolad
var nAvrgYear
var nDays
var dTishrei1
var nLengthOfYear
var bLeap
var bHaser
var bShalem
var nMonthLen
var bWhile
var d1900=new Date(1900,0,1)
nOneMolad=29+(12/24)+(793/(1080*24))
nAvrgYear=nOneMolad*(235/19)
nDays=Math.round((dGreg-d1900)/(24*60*60*1000))
nDays+=2067025
nYearH=Math.floor(nDays/nAvrgYear)+1
dTishrei1=Tishrei1(nYearH)
if(SameDate(dTishrei1,dGreg)){nMonthH=1
nDateH=1}
else{if(dTishrei1<dGreg){while(Tishrei1(nYearH+1)<=dGreg){nYearH+=1}}
else{nYearH-=1
while(Tishrei1(nYearH)>dGreg){nYearH-=1}}
nDays=(dGreg-Tishrei1(nYearH))/(24*60*60*1000)
nDays=Math.round(nDays)
nLengthOfYear=LengthOfYear(nYearH)
bHaser=nLengthOfYear==353||nLengthOfYear==383
bShalem=nLengthOfYear==355||nLengthOfYear==385
bLeap=IsLeapYear(nYearH)
nMonthH=1
do{switch(nMonthH){case 1:case 5:case 6:case 8:case 10:case 12:nMonthLen=30
break
case 4:case 7:case 9:case 11:case 13:nMonthLen=29
break
case 6:nMonthLen=30
break
case 2:nMonthLen=(bShalem?30:29)
break
case 3:nMonthLen=(bHaser?29:30)
break}
if(nDays>=nMonthLen){bWhile=true
if(bLeap||nMonthH!=5){nMonthH++}
else{nMonthH+=2}
nDays-=nMonthLen}
else{bWhile=false}}while(bWhile)
nDateH=nDays+1}
return nMonthH+"/"+nDateH+"/"+nYearH}
function SameDate(d1,d2){return(d1.getFullYear()==d2.getFullYear()&&d1.getMonth()==d2.getMonth()&&d1.getDate()==d2.getDate())}</SCRIPT><!--<META content="MSHTML 6.00.2900.3132"name=GENERATOR>--></HEAD><BODY><center><SCRIPT type=text/javascript>firstRun()</SCRIPT><script type="text/javascript">var gaJsHost=(("https:"==document.location.protocol)?"https://ssl.":"http://www.");document.write(unescape("%3Cscript src='"+gaJsHost+"google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var random_number=Math.random();if(random_number<0.35){google_ad_client="pub-0906149740519198";google_ad_slot="9674727056";google_ad_width=200;google_ad_height=200;}else
{google_ad_client="pub-0906149740519198";google_ad_slot="0729457625";google_ad_width=250;google_ad_height=250;}</script><script type="text/javascript"src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script><script type="text/javascript">try{var pageTracker=_gat._getTracker("UA-11013280-1");pageTracker._trackPageview();}catch(err){}</script></CENTER></BODY></HTML>]]></Content></Module>